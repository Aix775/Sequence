/*
 * Sequence
 * The CSS3 Animation Framework
 *
 * @link https://github.com/IanLunn/Sequence
 * @author IanLunn
 * @version 2.0.0
 * @license https://github.com/IanLunn/Sequence/blob/master/LICENSE
 * @copyright IanLunn
 */
function defineSequence(a,b){"use strict";var c=function(c,d){function e(a){return"[object Array]"===Object.prototype.toString.call(a)?!0:!1}function f(a,b){for(var c in b)a[c]=b[c];return a}function g(a,b,c){return a.attachEvent===!0?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1),c}function h(a,b,c){a.detachEvent===!0?(a.detachEvent("on"+b,a[b+c]),a[b+c]=null):a.removeEventListener(b,c,!1)}function i(a,b){return a.getElementsByClassName===!0?a.getElementsByClassName(b):function(a,b){null===b&&(b=document);var c,d,e=[],f=b.getElementsByTagName("*"),g=f.length,h=new RegExp("(^|\\s)"+a+"(\\s|$)");for(c=0,d=0;g>c;c++)h.test(f[c].className)&&(e[d]=f[c],d++);return e}(b,a)}function j(a){var b,c;return c=a.indexOf("ms")>-1?1:1e3,b="0s"==a?0:parseFloat(a.replace("s",""))*c}function k(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)}function l(a,b){!k(a,b)==!0&&(a.className+=(a.className?" ":"")+b)}function m(a,b){k(a,b)===!0&&(a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function n(a){if(a.transitionsSupported!==!1)for(var b=0;b<a.steps.length;b++){var c=a.steps[b];if(k(c,"animate-in")===!0){var d="step"+(b+1);a._animation.resetInheritedSpeed(d,"animate-in"),m(c,"animate-in")}}}function o(a,b,c){if("body"!==b.localName){if(a!==b){var c=b;return o(a,b.parentNode,c)}if(void 0!==c)for(var d=c,e=a.getElementsByTagName(d.localName),f=e.length;f--;)if(d===e[f])return f+1}}var p={startingStepId:1,startingStepAnimatesIn:!1,cycle:!0,phaseThreshold:!0,reverseWhenNavigatingBackwards:!1,moveActiveStepToTop:!0,animateCanvas:!0,animateCanvasDuration:500,autoPlay:!1,autoPlayThreshold:5e3,autoPlayDirection:1,navigationSkip:!0,navigationSkipThreshold:250,fadeStepWhenSkipped:!0,fadeStepTime:500,preventReverseSkipping:!1,nextButton:!0,prevButton:!0,pauseButton:!0,unpauseThreshold:null,pauseOnHover:!0,pagination:!0,preloader:!1,preloadTheseSteps:[1],preloadTheseImages:[],hideStepsUntilPreloaded:!0,keyNavigation:!0,numericKeysGoToSteps:!0,keyEvents:{left:function(a){a.prev()},right:function(a){a.next()}},swipeNavigation:!0,swipeEvents:{left:function(a){a.prev()},right:function(a){a.next()},up:!1,down:!1},swipeHammerOptions:{},hashTags:!1,hashDataAttribute:!1,hashChangesOnFirstStep:!1,fallback:{speed:500,layout:"auto"}},q=50,r=100,s=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+t.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+u.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.8.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString,"Webkit Moz O ms"),t=s.split(" "),u=s.toLowerCase().split(" "),v={svg:"http://www.w3.org/2000/svg"},w={},x=[],y=x.slice,z={}.hasOwnProperty;l=e(z,"undefined")||e(z.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return z.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d}),w.cssanimations=function(){return i("animationName")},w.csstransitions=function(){return i("transition")},w.svg=function(){return!!b.createElementNS&&!!b.createElementNS(v.svg,"svg").createSVGRect};for(var A in w)l(w,A)&&(k=A.toLowerCase(),n[k]=w[A](),x.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._domPrefixes=u,n._cssomPrefixes=t,n.testProp=function(a){return g([a])},n.testAllProps=i,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(this,window.document),t=function(a){for(var b=[],c=a[0].getElementsByTagName("*"),d=c.length,e=0;d>e;e++){var f=c[e],a=f.parentNode;k(a,"sequence-canvas")===!0&&b.push(f)}return b},u={};return u._getAnimationMap={init:function(a){if(this.animationMap={},u.transitionsSupported===!0)this.clonedSequence=this.createClone(a),this.clonedCanvas=i(this.clonedSequence,"sequence-canvas"),this.clonedSteps=t(this.clonedCanvas),this.originalClasses=this.clonedSequence.className,this.animationMap.stepsAnimating=0,this.steps(),this.destroyClone(this.clonedSequence);else for(var b=0;b<u.noOfSteps;b++){var c="step"+(b+1);this.animationMap[c]={},this.animationMap[c].element=u.steps[b]}return this.animationMap},steps:function(){for(var a=0;a<u.noOfSteps;a++){var b="step"+(a+1),c=this.clonedSteps[a],d=u.steps[a],e=c.getElementsByTagName("*"),f=d.getElementsByTagName("*"),g=e.length;this.animationMap[b]={},this.animationMap[b].element=d,l(this.clonedSequence,b),this.phases("animate-in",b,c,e,f,g),this.phases("animate-out",b,c,e,f,g),m(this.clonedSequence,b)}},phases:function(a,b,c,d,e,f){var g,h,i,k,n=[],o=void 0,p=void 0,q=void 0,r={};for(l(c,a),this.animationMap[b][a]={},k=0;f>k;k++){g=d[k],h=e[k],i=getComputedStyle(g,null)||g.currentStyle,r={};var t=j(i[s.prefixed("transitionDuration")]),u=j(i[s.prefixed("transitionDelay")]),v=i[s.prefixed("transitionTimingFunction")],w=t+u;0!==w&&(r.element=h,r.duration=t,r.delay=u,r.timingFunction=v,n.push(r),(void 0===o||t>o)&&(o=t),(void 0===p||u>p)&&(p=u),(void 0===q||w>q)&&(q=w))}m(c,a),this.animationMap[b][a].elements=n,this.animationMap[b][a].noOfElements=n.length,this.animationMap[b][a].maxDuration=o,this.animationMap[b][a].maxDelay=p,this.animationMap[b][a].computedDuration=q},createClone:function(a){var b=a.cloneNode(!0);return b.style.display="none",b.id="sequence",a.parentNode.insertBefore(b,a),b},destroyClone:function(a){a.parentNode.removeChild(a)}},u._ui={defaultElements:{nextButton:".sequence-next",prevButton:".sequence-prev",pauseButton:".sequence-pause",pagination:".sequence-pagination",preloader:".sequence-preloader"},getElement:function(a,b){var c;return c=document.querySelectorAll(b===!0?this.defaultElements[a]:b)},show:function(a,b){u.transitionsSupported===!0&&(a.style.transition=b+"ms opacity linear",a.style.opacity=1)},hide:function(a,b,c){u.transitionsSupported===!0&&(a.style.transition=b+"ms opacity linear",a.style.opacity=".2"),void 0!==c&&setTimeout(function(){c()},b)}},u._autoPlay={init:function(){u.isAutoPlayActive=!1,u.isPaused=u.options.autoPlay===!0?!1:!0,u.isHardPaused=u.isPaused,u.options.unpauseThreshold=null===u.options.unpauseThreshold?u.options.autoPlayThreshold:u.options.unpauseThreshold,u.options.autoPlay===!0&&u.isPaused===!1&&this.start()},unpause:function(){u.isPaused===!0&&(u.isPaused=!1,this.start(),m(u.element,"paused"),u.unpaused(u))},pause:function(){u.isPaused===!1&&(u.isPaused=!0,this.stop(),l(u.element,"paused"),u.paused(u))},start:function(){var a;a=u.isPaused===!1?u.options.autoPlayThreshold:u.options.unpauseThreshold,u.isAutoPlayActive=!0,u.options.autoPlay=!0,clearTimeout(u.autoPlayTimer),u.autoPlayTimer=setTimeout(function(){1===u.options.autoPlayDirection?u.next():u.prev()},a)},stop:function(){u.isAutoPlayActive=!1,u.options.autoPlay=!1,clearTimeout(u.autoPlayTimer)}},u._animation={moveCanvas:function(a,b){if(u.options.animateCanvas===!0){var c=u.canvas[0],d=u.steps[a-1],e=-1*d.offsetLeft,f=-1*d.offsetTop,g=[e,f];if(g!==u.canvasPreviousPosition&&void 0!==u.canvasPreviousPosition){var h=0;b===!0&&u._firstRun===!1&&(h=u.options.animateCanvasDuration),u.transitionsSupported===!0&&(c.style.transition=h+"ms transform",c.style.transform="translate3d("+e+"px, "+f+"px, 0)")}u.canvasPreviousPosition=g}},moveActiveStepToTop:function(a,b){if(u.options.moveActiveStepToTop===!0){var c=u.animationMap["step"+u.prevStepId].element;c.style.zIndex=1,a.style.zIndex=u.noOfSteps-1,b.style.zIndex=u.noOfSteps}},manageNavigationSkip:function(a,b,c,d,e){if(u.transitionsSupported!==!1){if(u._ui.show(e,0),u.options.navigationSkip===!0){var f=u.animationMap.stepsAnimating;if(u.animationMap[c].isAnimating=!0,u.animationMap[d].isAnimating=!0,u.animationMap.stepsAnimating+=2,0!==f&&(u.navigationSkipThresholdActive=!0,u.options.fadeStepWhenSkipped===!0))for(var g=1;g<=u.noOfSteps;g++){var h="step"+g,i=u.animationMap[h];if(i.isAnimating===!0&&g!==a){var j=i.element;u._animation.stepSkipped(b,h,j)}}setTimeout(function(){u.navigationSkipThresholdActive=!1},u.options.navigationSkipThreshold)}}},stepSkipped:function(a,b,c){u._ui.hide(c,u.options.fadeStepTime,function(){})},changeStep:function(a){var b="step"+a;if(void 0!==u.currentStepId){var c="step"+u.currentStepId;l(u.element,b),m(u.element,c)}else l(u.element,b)},reverseProperties:function(a,b,c){for(var d=this,e=u.animationMap[a][b],f=0;f<e.noOfElements;f++){var g=e.elements[f];g.element.style.transition=c.animation+"ms "+c.delay+"ms "+d.reverseTimingFunction(g.timingFunction)}setTimeout(function(){for(var a=0;a<e.noOfElements;a++){var b=e.elements[a];b.element.style.transition=""}},c.total)},forward:function(a,b,c,d,e,f,g){var h=this;m(c,"animate-out"),h.domDelay(function(){l(e,"animate-out"),m(e,"animate-in"),h.startAnimateIn(a,1,b,c,d,e,f,g)})},reverse:function(a,b,c,d,e,f,g){var h=this;l(c,"animate-out"),h.domDelay(function(){h.reverseProperties(d,"animate-out",f["current-phase"]),h.reverseProperties(b,"animate-in",f["next-phase"]),m(e,"animate-in"),h.startAnimateIn(a,-1,b,c,d,e,f,g)})},startAnimateIn:function(a,b,c,d,e,f,g,h){var i=this,j=0,k=0,n=0,o=0;u.prevStepId=u.currentStepId,u.currentStepId=a,u.animationStarted(a,u),i._currentPhaseStarted(),u._firstRun===!1?(j=g["current-phase"].total,k=g["next-phase"].total,n=g["next-phase-threshold"],o=g["step-total"],setTimeout(function(){i._nextPhaseStarted(h),l(d,"animate-in"),m(d,"animate-out")},n)):(u.options.startingStepAnimatesIn===!1?i.resetInheritedSpeed(c,"animate-in"):(k=g["next-phase"].total,o=k),i._nextPhaseStarted(h),u._firstRun=!1,l(d,"animate-in"),m(d,"animate-out")),i.phaseEnded(j,e,i._currentPhaseEnded),i.phaseEnded(k,c,i._nextPhaseEnded),i.stepEnded(a,o)},_currentPhaseStarted:function(){u.currentPhaseStarted(u)},_currentPhaseEnded:function(){u.currentPhaseEnded(u)},_nextPhaseStarted:function(a){void 0===a&&u._hashTags.update(),u.nextPhaseStarted(u)},_nextPhaseEnded:function(){u.nextPhaseEnded(u)},phaseEnded:function(a,b,c){setTimeout(function(){u.animationMap[b].isAnimating=!1,u.animationMap.stepsAnimating-=1,c()},a)},stepEnded:function(a,b){setTimeout(function(){u._autoPlay.init(),u.isActive=!1,u.animationFinished(a,u)},b)},getStepDurations:function(a,b,c,d){if(u.transitionsSupported!==!1){var e={};e["current-phase"]={},e["next-phase"]={},e["current-phase"].animation=0,e["current-phase"].delay=0,e["current-phase"].total=0,e["next-phase"].animation=0,e["next-phase"].delay=0,e["next-phase"].total=0,e["next-phase-threshold"]=0,e["step-total"]=0;var f=0,g=0,h=0,i=0,j=u.options.phaseThreshold;if(1===d)g=u.animationMap[c]["animate-out"].computedDuration,f=u.animationMap[b]["animate-in"].computedDuration;else{if(j!==!0){var k=u.animationMap[c]["animate-in"].maxDuration-u.animationMap[b]["animate-out"].maxDuration;k>0?h=k:i=Math.abs(k)}g=u.animationMap[c]["animate-in"].maxDuration,f=u.animationMap[b]["animate-out"].maxDuration,h+=u.animationMap[c]["animate-in"].maxDelay,i+=u.animationMap[b]["animate-out"].maxDelay}var l=g+i,m=f+h;switch(e["current-phase"].animation=g,e["current-phase"].delay=i,e["current-phase"].total=l,e["next-phase"].animation=f,e["next-phase"].delay=h,j){case!1:e["next-phase"].total=m,e["step-total"]=l>m?l:m;break;case!0:e["next-phase-threshold"]=l,e["next-phase"].total=l+m,e["step-total"]=l+m;break;default:e["next-phase-threshold"]=j;var n=m+j;e["next-phase"].total=n,e["step-total"]=l>n?l:n}return e}},reversePhase:function(a){var b={"animate-out":"animate-in","animate-in":"animate-out"};return b[a]},domDelay:function(a){setTimeout(function(){a()},q)},reverseTimingFunction:function(a){var b={linear:"cubic-bezier(0.0,0.0,1.0,1.0)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1.0)","ease-in":"cubic-bezier(0.42, 0.0, 1.0, 1.0)","ease-in-out":"cubic-bezier(0.42, 0.0, 0.58, 1.0)","ease-out":"cubic-bezier(0.0, 0.0, 0.58, 1.0)"};a.indexOf("cubic-bezier")<0&&(a=b[a]);for(var c=a.replace("cubic-bezier(","").replace(")","").split(","),d=c.length,e=0;d>e;e++)c[e]=parseFloat(c[e]);var f=[1-c[2],1-c[3],1-c[0],1-c[1]];return a="cubic-bezier("+f+")"},getStepProperties:function(a,b){var c={};return c.duration=u.animationMap[a][b].maxDuration,c.delay=u.animationMap[a][b].maxDelay,c.computedDuration=u.animationMap[a][b].computedDuration,c.elements=u.animationMap[a][b].elements,c.noOfElements=u.animationMap[a][b].noOfElements,c},resetInheritedSpeed:function(a,b){if(u.transitionsSupported!==!1){for(var c=u.animationMap[a][b].elements,d=u.animationMap[a][b].noOfElements,e=0;d>e;e++){var f=c[e];f.element.style.transition="0ms 0ms"}setTimeout(function(){for(var a=0;d>a;a++){var b=c[a];b.element.style.transition=""}},q)}},getShortestDirection:function(a,b,c){var d,e,f;return a>b?(d=a-b,e=b+(c-a)):(e=b-a,d=a+(c-b)),f=e>=d?1:-1},getDirection:function(a,b){var c=this;return void 0!==b?b:(u.options.reverseWhenNavigatingBackwards===!0||u.transitionsSupported===!1?void 0===b&&u.options.cycle===!0?b=c.getShortestDirection(a,u.currentStepId,u.noOfSteps):void 0===b&&(b=a<u.currentStepId?-1:1):b=1,b)},propertySupport:function(){u.transitionsSupported=!1,u.animationsSupported=!1,s.csstransitions===!0&&(u.transitionsSupported=!0),s.cssanimations===!0&&(u.animationsSupported=!0)}},u._animationFallback={animate:function(a,b,c,d,e,f,g){if(a!==!1){var h=(new Date).getTime(),i=setInterval(function(){var j=Math.min(1,((new Date).getTime()-h)/f);a.style[b]=d+j*(e-d)+c,1===j&&(void 0!==g&&g(),clearInterval(i))},25);a.style[b]=d+c}},setupCanvas:function(){if(u.transitionsSupported===!1){l(u.element,"sequence-fallback"),u.element.style.overflow="hidden",u.element.style.whiteSpace="nowrap",this.canvasWidth=u.canvas[0].offsetWidth,u.canvas[0].style.position="relative",u.canvas[0].style.width="100%",u.canvas[0].style.height="100%";for(var a=0;a<u.noOfSteps;a++){var b=u.steps[a];l(b,"animate-in"),b.style.width="100%",b.style.height="100%";var c=u.options.fallback.layout;("auto"===c&&u.options.animateCanvas===!1||"basic"===c)&&(b.style.display="inline-block",b.style.position="relative")}}},moveCanvas:function(a,b,c){var d=u.canvas[0],e=a.offsetLeft,f=a.offsetTop,g=b.offsetLeft,h=b.offsetTop;c===!0?(this.animate(d,"left","px",-e,-g,u.options.fallback.speed),this.animate(d,"top","px",-f,-h,u.options.fallback.speed)):(d.style.left=-g+"px",d.style.top=-h+"px")},goTo:function(a,b,c,d,e,f,g){u.prevStepId=u.currentStepId,u.currentStepId=a,void 0===g&&u._hashTags.update(),u._firstRun===!1?(this.moveCanvas(c,e,!0),u.animationStarted(u.currentStepId,u)):(this.moveCanvas(c,e),u._firstRun=!1),u._animation.stepEnded(a,u.options.fallback.speed)}},u._hashTags={init:function(a){if(u.options.hashTags===!0){var b,c;if(c=location.hash.replace("#!",""),u.stepHashTags=this.getStepHashTags(),""===c)return a;u.currentHashTag=c,b=this.hasCorrespondingStep(),b>-1&&(a=b+1)}return a},hasCorrespondingStep:function(){var a=-1,b=u.stepHashTags.indexOf(u.currentHashTag);return b>-1&&(a=b),a},getStepHashTags:function(){for(var a,b=[],c=0;c<u.noOfSteps;c++)a=u.options.hashDataAttribute===!1?u.steps[c].id:u.steps[c].dataset.sequenceHashtag,b.push(a);return b},update:function(){if(u.options.hashTags===!0&&u._firstRun===!1||u.options.hashTags===!0&&u._firstRun===!0&&u.options.hashChangesOnFirstStep===!0){var a=u.currentStepId-1;u.currentHashTag=u.stepHashTags[a],history.pushState?history.pushState(null,null,"#!"+u.currentHashTag):location.hash="#!"+u.currentHashTag}},setupEvent:function(){if("onhashchange"in window)window.addEventListener?(window.addHashChange=function(a,b){window.addEventListener("hashchange",a,b)},window.removeHashChange=function(a){window.removeEventListener("hashchange",a)}):window.attachEvent&&(window.addHashChange=function(a){window.attachEvent("onhashchange",a)},window.removeHashChange=function(a){window.detachEvent("onhashchange",a)});else{var a=[],b=location.href;window.addHashChange=function(b,c){"function"==typeof b&&a[c?"unshift":"push"](b)},window.removeHashChange=function(b){for(var c=a.length-1;c>=0;c--)a[c]===b&&a.splice(c,1)},setInterval(function(){var c=location.href;if(b!==c){var d=b;b=c;for(var e=0;e<a.length;e++)a[e].call(window,{type:"hashchange",newURL:c,oldURL:d})}},100)}}},u._preload={init:function(b){var c=this;if(u.options.preloader!==!1){l(u.element,"sequence-preloading"),u.preloader=u._ui.getElement("preloader",u.options.preloader),c.append(),c.addStyles(),c.hideAndShowSteps("hide");var d=this.saveImagesToArray(u.options.preloadTheseSteps),e=this.saveImagesToArray(u.options.preloadTheseImages,!0),f=d.concat(e),g=a(f);g.on("always",function(){c.complete(b)});var h=1;g.on("progress",function(a,b){var c=b.isLoaded?"loaded":"broken";u.preloadProgress(c,b.img.src,h++,f.length,u)})}},complete:function(a){u.preloaded(u),this.hideAndShowSteps("show"),m(u.element,"sequence-preloading"),l(u.element,"sequence-preloaded"),this.hide(),a()},defaultStyles:".sequence-preloader {position: absolute;z-index: 9999;height: 100%;width: 100%;}.sequence-preloader .preload .circle {position: relative;top: -50%;display: inline-block;height: 12px;width: 12px;fill: #ff9442;}.preload {position: relative;top: 50%;display: block;height: 12px;width: 48px;margin: -6px auto 0 auto;}.preload-complete {opacity: 0;visibility: hidden;"+s.prefixed("transition")+": .5s;}.preload.fallback .circle {float: left;margin-right: 4px;background-color: #ff9442;border-radius: 6px;}",addStyles:function(){if(u.options.preloader===!0){var a=document.head||document.getElementsByTagName("head")[0];if(this.styleElement=document.createElement("style"),this.styleElement.type="text/css",this.styleElement.styleSheet?this.styleElement.styleSheet.cssText=this.defaultStyles:this.styleElement.appendChild(document.createTextNode(this.defaultStyles)),a.appendChild(this.styleElement),s.svg===!1){var b=u.preloader.firstChild;this.preloadIndicatorTimer=setInterval(function(){u._ui.hide(b,500,function(){u._ui.show(b,500)})},1e3)}}},removeStyles:function(){this.styleElement.parentNode.removeChild(this.styleElement)},saveImagesToArray:function(a,b){var c=[];if(e(a)===!1)return c;var d=a.length;if(b!==!0)for(var f=0;d>f;f++)for(var g=u.steps[f],h=g.getElementsByTagName("img"),i=h.length,j=0;i>j;j++){var k=h[j];c.push(k)}else for(var l=[],f=0;d>f;f++){var m=a[f];l[f]=new Image,l[f].src=m,c.push(l[f])}return c},hide:function(){var a=this;u.transitionsSupported===!0?l(u.preloader,"preload-complete"):u._ui.hide(u.preloader,500),clearInterval(this.preloadIndicatorTimer),setTimeout(function(){a.remove()},500)},append:function(){u.options.preloader===!0&&0===u.preloader.length&&(u.preloader=document.createElement("div"),u.preloader.className="sequence-preloader",u.preloader=[u.preloader],u.preloader[0].innerHTML=s.svg===!0?'<svg class="preload" xmlns="http://www.w3.org/2000/svg"><circle class="circle" cx="6" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" /></circle><circle class="circle" cx="22" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" begin="150ms" repeatCount="indefinite" /></circle><circle class="circle" cx="38" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" begin="300ms" repeatCount="indefinite" /></circle></svg>':'<div class="preload fallback"><div class="circle"></div><div class="circle"></div><div class="circle"></div></div>',u.element.insertBefore(u.preloader[0],null))},remove:function(){u.preloader[0].parentNode.removeChild(u.preloader[0]),u.options.preloader===!0&&this.removeStyles()},hideAndShowSteps:function(a){if(u.options.hideStepsUntilPreloaded===!0&&0!==u.preloader.length)for(var b=0;b<u.noOfSteps;b++){var c=u.steps[b];"hide"===a?u._ui.hide(c,0):u._ui.show(c,0)}}},u.manageEvent={list:{load:[],click:[],mousemove:[],mouseleave:[],Hammer:[],keydown:[],hashchange:[],resize:[]},init:function(){this.add.hashChange(),u.options.swipeNavigation===!0&&this.add.swipeNavigation(),u.options.keyNavigation===!0&&this.add.keyNavigation(),u.options.animateCanvas===!0&&this.add.resizeThrottle(),u.options.nextButton!==!1&&(u.nextButton=u._ui.getElement("nextButton",u.options.nextButton),this.add.button(u.nextButton,u.next)),u.options.prevButton!==!1&&(u.prevButton=u._ui.getElement("prevButton",u.options.prevButton),this.add.button(u.prevButton,u.prev)),u.options.pauseButton!==!1&&(u.pauseButton=u._ui.getElement("pauseButton",u.options.pauseButton),this.add.button(u.pauseButton,u.togglePause)),this.add.pauseOnHover(),u.options.pagination!==!1&&(u.pagination=u._ui.getElement("pagination",u.options.pagination),this.add.pagination(u.pagination))},remove:function(a){var b=u.manageEvent.list[a],c=b.length;switch(a){case"hashchange":removeHashChange(b[0].handler);break;case"hammer":break;default:for(var d=0;c>d;d++){var e=b[d];h(e.element,a,e.handler)}}},add:{hashChange:function(){u._hashTags.setupEvent();var a=function(a){var b,c;b=a.newURL||location.href,b=b.split("#!")[1],u.currentHashTag!==b&&(c=u.stepHashTags.indexOf(b)+1,u.currentHashTag=b,u.goTo(c,void 0,void 0,!0))};addHashChange(a),u.manageEvent.list.hashchange.push({element:window,handler:a})},button:function(a,b){for(var c,d,e=a.length,f=0;e>f;f++)d=a[f],c=g(d,"click",function(){b()}),u.manageEvent.list.click.push({element:d,handler:c})},pagination:function(a){for(var b,c,d=a.length,e=0;d>e;e++)c=a[e],b=g(c,"click",function(a){var b=o(this,a.target);u.goTo(b)}),u.manageEvent.list.click.push({element:c,handler:b})},pauseOnHover:function(){var a,b=function(a,b){var c=a.offsetLeft,d=c+a.clientWidth,e=a.offsetTop,f=e+a.clientHeight;return b.clientX>=c&&b.clientX<=d&&b.clientY>=e&&b.clientY<=f?!0:!1},c=!1;a=g(u.element,"mousemove",function(a){b(this,a)===!0?(c===!1&&u.options.pauseOnHover===!0&&u._autoPlay.pause(),c=!0):(c===!0&&u.isHardPaused===!1&&u.options.pauseOnHover===!0&&u._autoPlay.unpause(),c=!1)}),u.manageEvent.list.mousemove.push({element:u.element,handler:a}),a=g(u.element,"mouseleave",function(){u.isHardPaused===!1&&u.options.pauseOnHover===!0&&u._autoPlay.unpause(),c=!1}),u.manageEvent.list.mouseleave.push({element:u.element,handler:a})},swipeNavigation:function(){var a=function(a){switch(a.type){case"dragleft":case"dragright":a.gesture.preventDefault();break;case"release":switch(a.gesture.direction){case"left":u.options.swipeEvents.left(u);break;case"right":u.options.swipeEvents.right(u);break;case"up":u.options.swipeEvents.up!==!1&&u.options.swipeEvents.up(u);break;case"down":u.options.swipeEvents.down!==!1&&u.options.swipeEvents.down(u)}}};b(u.element,u.options.swipeHammerOptions).on("dragleft dragright release",a),u.manageEvent.list.Hammer.push({element:u.element,handler:a})},keyNavigation:function(){var a=g(window,"keydown",function(a){var b=parseInt(String.fromCharCode(a.keyCode));switch(b>0&&b<=u.noOfSteps&&u.options.numericKeysGoToSteps&&u.goTo(b),a.keyCode){case 37:u.options.keyEvents.left(u);break;case 39:u.options.keyEvents.right(u)}});u.manageEvent.list.keydown.push({element:window,handler:a})},resizeThrottle:function(){function a(){u._animation.moveCanvas(u.currentStepId,!1),u.throttledResize(u)}var b,c;c=g(window,"resize",function(){clearTimeout(b),b=setTimeout(a,r)}),u.manageEvent.list.resize.push({element:window,handler:c})}}},u._init=function(a){var b,c,e,g;u.options=f(p,d),u.element=a,u.canvas=i(u.element,"sequence-canvas"),u.steps=t(u.canvas),u.canvasPreviousPosition=0,u.noOfSteps=u.steps.length,u._animation.propertySupport(),u.animationMap=u._getAnimationMap.init(a),n(u),u.manageEvent.init(),u._autoPlay.init(),u._firstRun=!0,u.elementsAnimating=[],b=u.options.startingStepId,b=u._hashTags.init(b),1===u.options.autoPlayDirection?(e=b-1,u.prevStepId=1>e?u.noOfSteps:e):(e=b+1,u.prevStepId=e>u.noOfSteps?1:e),u.currentStepId=u.prevStepId,c="step"+u.prevStepId,u._animationFallback.setupCanvas(b),g=function(){u.options.autoPlay===!0&&u.unpaused(u),u._animation.domDelay(function(){u._animation.resetInheritedSpeed(c,"animate-out")}),u.goTo(b,u.options.autoPlayDirection,!0)},u.options.preloader!==!1?u._preload.init(function(){g()}):g()},u.destroy=function(){},u.next=function(){var a=u.currentStepId+1;a>u.noOfSteps&&u.options.cycle===!0&&(a=1),u.goTo(a)},u.prev=function(){var a=u.currentStepId-1;1>a&&u.options.cycle===!0&&(a=u.noOfSteps),u.goTo(a)},u.togglePause=function(){u.isPaused===!1?u.pause():u.unpause()},u.pause=function(){u.isHardPaused=!0,u._autoPlay.pause()},u.unpause=function(){u.isHardPaused=!1,u._autoPlay.unpause()},u.goTo=function(a,b,c,d){if(b=u._animation.getDirection(a,b),void 0===a||1>a||a>u.noOfSteps||a===u.currentStepId||u.options.navigationSkip===!1&&u.isActive===!0||u.options.navigationSkip===!0&&u.navigationSkipThresholdActive===!0&&void 0===d||u.options.preventReverseSkipping===!0&&u.direction!==b&&u.isActive===!0)return!1;var e=0;u.direction=b,void 0===c&&(e=u.options.phaseThreshold);var f="step"+u.currentStepId,g="step"+a,h=u.animationMap[f].element,i=u.animationMap[g].element;if(u._animation.moveActiveStepToTop(h,i),u._animation.manageNavigationSkip(a,b,f,g,i),u.isActive=!0,u._animation.changeStep(a),u.transitionsSupported===!0){u._animation.moveCanvas(a,!0),u._animation.resetInheritedSpeed(g,"animate-out");var j=u._animation.getStepDurations(a,g,f,b);1===b?u._animation.forward(a,g,i,f,h,j,d):u._animation.reverse(a,g,i,f,h,j,d)}else u._animationFallback.goTo(a,f,h,g,i,b,d)},u.paused=function(){},u.unpaused=function(){},u.animationStarted=function(){},u.animationFinished=function(){},u.currentPhaseStarted=function(){},u.currentPhaseEnded=function(){},u.nextPhaseStarted=function(){},u.nextPhaseEnded=function(){},u.throttledResize=function(){},u.preloaded=function(){},u.preloadProgress=function(){},u._init(c),u};return c}"function"==typeof define&&define.amd?define(["third-party/modernizr.min"],["third-party/imagesloaded.pkgd.min"],["third-party/hammer.min"],defineSequence):sequence=defineSequence(imagesLoaded,Hammer);