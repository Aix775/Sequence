/*
 * Sequence
 * The CSS3 Animation Framework
 *
 * @link https://github.com/IanLunn/sequence
 * @author IanLunn
 * @version 2.0.0
 * @license https://github.com/IanLunn/sequence/blob/master/LICENSE
 * @copyright IanLunn
 */
!function(global){function defineSequence(ModernizrSeq,imagesLoaded,Hammer){"use strict";function isArray(object){return"[object Array]"===Object.prototype.toString.call(object)?!0:!1}function extend(a,b){for(var i in b)a[i]=b[i];return a}function addEventListener_cb(obj,evt,fnc){return obj.addEventListener?(obj.addEventListener(evt,fnc,!1),!0):obj.attachEvent?obj.attachEvent("on"+evt,fnc):(evt="on"+evt,"function"==typeof obj[evt]&&(fnc=function(f1,f2){return function(){f1.apply(this,arguments),f2.apply(this,arguments)}}(obj[evt],fnc)),obj[evt]=fnc,!0)}function convertTimeToMs(time){var convertedTime,fraction;return fraction=time.indexOf("ms")>-1?1:1e3,convertedTime="0s"==time?0:parseFloat(time.replace("s",""))*fraction}function hasClass(el,name){return new RegExp("(\\s|^)"+name+"(\\s|$)").test(el.className)}function addClass(el,name){hasClass(el,name)||(el.className+=(el.className?" ":"")+name)}function removeClass(el,name){hasClass(el,name)&&(el.className=el.className.replace(new RegExp("(\\s|^)"+name+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function removeNoJsClass(self){for(var i=0;i<self.steps.length;i++){var element=self.steps[i];if((" "+element.className+" ").replace(/[\n\t]/g," ").indexOf(" animate-in ")>-1){var step="step"+(i+1);self._animation.resetInheritedSpeed(step,"animate-in"),updateClassList(element,"","animate-in")}}}function getPaginationIndex(paginationElement,target,previousTarget){if("body"!==target.localName){if(paginationElement!==target){var previousTarget=target;return getPaginationIndex(paginationElement,target.parentNode,previousTarget)}if(void 0!==previousTarget)for(var topLevel=previousTarget,allTopLevel=paginationElement.getElementsByTagName(topLevel.localName),i=allTopLevel.length;i--;)if(topLevel===allTopLevel[i])return i+1}}function updateClassList(element,classToAdd,classToRemove){""!==classToAdd&&addClass(element,classToAdd),void 0!==classToRemove&&removeClass(element,classToRemove)}function Sequence(element,options){var self={};return self._getAnimationMap={init:function(element){return this.clonedSequence=this.createClone(element),this.clonedCanvas=this.clonedSequence.querySelectorAll(".sequence-canvas"),this.clonedSteps=this.clonedSequence.querySelectorAll(".sequence-canvas > li"),this.originalClasses=this.clonedSequence.className,this.animationMap={},this.animationMap.stepsAnimating=0,this.steps(),this.destroyClone(this.clonedSequence),this.animationMap},steps:function(){for(var i=0;i<self.noOfSteps;i++){var stepNo="step"+(i+1),clonedStepElement=this.clonedSteps[i],realStepElement=self.steps[i],clonedStepChildren=clonedStepElement.getElementsByTagName("*"),realStepChildren=realStepElement.getElementsByTagName("*"),noOfStepChildren=clonedStepChildren.length;this.animationMap[stepNo]={},this.animationMap[stepNo].element=realStepElement,updateClassList(this.clonedSequence,stepNo),this.phases("animate-in",stepNo,clonedStepElement,clonedStepChildren,realStepChildren,noOfStepChildren),this.phases("animate-out",stepNo,clonedStepElement,clonedStepChildren,realStepChildren,noOfStepChildren),updateClassList(this.clonedSequence,"",stepNo)}},phases:function(phase,stepNo,clonedStepElement,clonedStepChildren,realStepChildren,noOfStepChildren){var elements=[],maxDuration=void 0,maxDelay=void 0,maxComputedDuration=void 0;updateClassList(clonedStepElement,phase),this.animationMap[stepNo][phase]={};for(var elementNo=0;noOfStepChildren>elementNo;elementNo++){var element=clonedStepChildren[elementNo],realElement=realStepChildren[elementNo],styles=getComputedStyle(element,null)||element.currentStyle,elementProperties={},transitionDuration=convertTimeToMs(styles[ModernizrSeq.prefixed("transitionDuration")]),transitionDelay=convertTimeToMs(styles[ModernizrSeq.prefixed("transitionDelay")]),transitionTimingFunction=styles[ModernizrSeq.prefixed("transitionTimingFunction")],computedDuration=transitionDuration+transitionDelay;0!==computedDuration&&(elementProperties.element=realElement,elementProperties.duration=transitionDuration,elementProperties.delay=transitionDelay,elementProperties.timingFunction=transitionTimingFunction,elements.push(elementProperties),(void 0===maxDuration||transitionDuration>maxDuration)&&(maxDuration=transitionDuration),(void 0===maxDelay||transitionDelay>maxDelay)&&(maxDelay=transitionDelay),(void 0===maxComputedDuration||computedDuration>maxComputedDuration)&&(maxComputedDuration=computedDuration))}updateClassList(clonedStepElement,"",phase),this.animationMap[stepNo][phase].elements=elements,this.animationMap[stepNo][phase].noOfElements=elements.length,this.animationMap[stepNo][phase].maxDuration=maxDuration,this.animationMap[stepNo][phase].maxDelay=maxDelay,this.animationMap[stepNo][phase].computedDuration=maxComputedDuration},createClone:function(element){var clonedSequence=element.cloneNode(!0);return clonedSequence.style.display="none",clonedSequence.id="sequence",element.parentNode.insertBefore(clonedSequence,element),clonedSequence},destroyClone:function(element){element.parentNode.removeChild(element)}},self._ui={defaultElements:{nextButton:".sequence-next",prevButton:".sequence-prev",pauseButton:".sequence-pause",pagination:".sequence-pagination",preloader:".sequence-preloader"},getElement:function(type,option){var element;return element=document.querySelectorAll(option===!0?this.defaultElements[type]:option)},show:function(element,duration){self.transitionsSupported===!0&&(element.style.transition=duration+"ms opacity linear",element.style.opacity=1)},hide:function(element,duration,callback){self.transitionsSupported===!0&&(element.style.transition=duration+"ms opacity linear",element.style.opacity=".2"),void 0!==callback&&setTimeout(function(){callback()},duration)}},self._autoPlay={init:function(){self.isAutoPlaying=!1,self.isPaused=self.options.autoPlay===!0?!1:!0,self.isHardPaused=self.isPaused,self.options.unpauseThreshold=null===self.options.unpauseThreshold?self.options.autoPlayThreshold:self.options.unpauseThreshold,self.options.autoPlay===!0&&self.isPaused===!1&&this.start()},unpause:function(){self.isPaused===!0&&(self.isPaused=!1,this.start(),removeClass(self.element,"paused"),self.unpaused())},pause:function(){self.isPaused===!1&&(self.isPaused=!0,this.stop(),addClass(self.element,"paused"),self.paused())},start:function(){var threshold;threshold=self.isPaused===!1?self.options.autoPlayThreshold:self.options.unpauseThreshold,self.isAutoPlaying=!0,self.options.autoPlay=!0,clearTimeout(self.autoPlayTimer),self.autoPlayTimer=setTimeout(function(){1===self.options.autoPlayDirection?self.next():self.prev()},threshold)},stop:function(){self.isAutoPlaying=!1,self.options.autoPlay=!1,clearTimeout(self.autoPlayTimer)}},self._animation={moveCanvas:function(id,animate){if(self.options.animateCanvas===!0){var canvas=self.canvas[0],step=self.steps[id-1],stepX=step.offsetLeft,stepY=step.offsetTop,position=stepX+stepY;if(position!==self.canvasPreviousPosition&&void 0!==self.canvasPreviousPosition){var duration=0;animate===!0&&(duration=self.options.animateCanvasDuration),self.transitionsSupported===!0&&(canvas.style.transition=duration+"ms transform",canvas.style.transform="translate3d(-"+stepX+"px, -"+stepY+"px, 0)")}self.canvasPreviousPosition=position}},moveActiveFrameToTop:function(currentStepElement,nextStepElement){self.options.moveActiveFrameToTop===!0&&(currentStepElement.style.zIndex=1,nextStepElement.style.zIndex=self.noOfSteps)},manageNavigationSkip:function(id,direction,currentStep,nextStep,nextStepElement){if(self._ui.show(nextStepElement,0),self.options.navigationSkip===!0){var activeStepsLength=self.animationMap.stepsAnimating;if(self.animationMap[currentStep].isAnimating=!0,self.animationMap[nextStep].isAnimating=!0,self.animationMap.stepsAnimating+=2,0!==activeStepsLength&&(self.navigationSkipThresholdActive=!0,self.options.fadeStepWhenSkipped===!0))for(var i=1;i<=self.noOfSteps;i++){var step="step"+i,stepProperties=self.animationMap[step];if(stepProperties.isAnimating===!0&&i!==id){var stepElement=stepProperties.element;self._animation.stepSkipped(direction,step,stepElement)}}setTimeout(function(){self.navigationSkipThresholdActive=!1},self.options.navigationSkipThreshold)}},stepSkipped:function(direction,step,stepElement){self._ui.hide(stepElement,self.options.fadeStepTime,function(){})},changeStep:function(id){var stepToAdd="step"+id;if(void 0!==self.currentStepId){var stepToRemove="step"+self.currentStepId;updateClassList(self.element,stepToAdd,stepToRemove)}else updateClassList(self.element,stepToAdd)},reverseProperties:function(step,phase,stepDurations){for(var _animation=this,stepProperties=self.animationMap[step][phase],i=0;i<stepProperties.noOfElements;i++){var stepElements=stepProperties.elements[i];stepElements.element.style.transition=stepDurations.animation+"ms "+stepDurations.delay+"ms "+_animation.reverseTimingFunction(stepElements.timingFunction)}setTimeout(function(){for(var i=0;i<stepProperties.noOfElements;i++){var stepElements=stepProperties.elements[i];stepElements.element.style.transition=""}},stepDurations.total)},forward:function(id,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations){var _animation=this;updateClassList(nextStepElement,"","animate-out"),_animation.domDelay(function(){updateClassList(currentStepElement,"animate-out","animate-in"),_animation.startAnimateIn(id,1,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations)})},reverse:function(id,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations){var _animation=this;updateClassList(nextStepElement,"animate-out"),_animation.domDelay(function(){_animation.reverseProperties(currentStep,"animate-out",stepDurations["current-phase"]),_animation.reverseProperties(nextStep,"animate-in",stepDurations["next-phase"]),updateClassList(currentStepElement,"","animate-in"),_animation.startAnimateIn(id,-1,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations)})},startAnimateIn:function(id,direction,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations){self.currentStepId=id,self.animationStarted(id);var currentPhaseDuration=0,nextPhaseDuration=0,nextPhaseThreshold=0,stepDurationTotal=0;self._firstRun===!1?(currentPhaseDuration=stepDurations["current-phase"].total,nextPhaseDuration=stepDurations["next-phase"].total,nextPhaseThreshold=stepDurations["next-phase-threshold"],stepDurationTotal=stepDurations["step-total"],setTimeout(function(){updateClassList(nextStepElement,"animate-in","animate-out")},nextPhaseThreshold)):(self.options.startingStepAnimatesIn===!1?self._animation.resetInheritedSpeed(nextStep,"animate-in"):(nextPhaseDuration=stepDurations["next-phase"].total,stepDurationTotal=nextPhaseDuration),self._firstRun=!1,updateClassList(nextStepElement,"animate-in","animate-out")),self._animation.phaseEnded(currentPhaseDuration,currentStep,self.currentPhaseEnded),self._animation.phaseEnded(nextPhaseDuration,nextStep,self.nextPhaseEnded),self._animation.stepEnded(id,stepDurationTotal)},phaseEnded:function(stepDurationTotal,step,callback){setTimeout(function(){self.animationMap[step].isAnimating=!1,self.animationMap.stepsAnimating-=1,callback()},stepDurationTotal)},stepEnded:function(id,stepDurationTotal){setTimeout(function(){self._autoPlay.init(),self.isActive=!1,self.animationFinished(id)},stepDurationTotal)},getStepDurations:function(nextStepId,nextStep,currentStep,direction){var durations={};durations["current-phase"]={},durations["next-phase"]={},durations["current-phase"].animation=0,durations["current-phase"].delay=0,durations["current-phase"].total=0,durations["next-phase"].animation=0,durations["next-phase"].delay=0,durations["next-phase"].total=0,durations["next-phase-threshold"]=0,durations["step-total"]=0;var nextPhaseDuration=0,currentPhaseDuration=0,nextDelay=0,currentDelay=0,phaseThreshold=self.options.phaseThreshold;if(1===direction)currentPhaseDuration=self.animationMap[currentStep]["animate-out"].computedDuration,nextPhaseDuration=self.animationMap[nextStep]["animate-in"].computedDuration;else{if(phaseThreshold!==!0){var reverseThreshold=self.animationMap[currentStep]["animate-in"].maxDuration-self.animationMap[nextStep]["animate-out"].maxDuration;reverseThreshold>0?nextDelay=reverseThreshold:currentDelay=Math.abs(reverseThreshold)}currentPhaseDuration=self.animationMap[currentStep]["animate-in"].maxDuration,nextPhaseDuration=self.animationMap[nextStep]["animate-out"].maxDuration,nextDelay+=self.animationMap[currentStep]["animate-in"].maxDelay,currentDelay+=self.animationMap[nextStep]["animate-out"].maxDelay}var currentPhaseDurationTotal=currentPhaseDuration+currentDelay,nextPhaseDurationTotal=nextPhaseDuration+nextDelay;switch(durations["current-phase"].animation=currentPhaseDuration,durations["current-phase"].delay=currentDelay,durations["current-phase"].total=currentPhaseDurationTotal,durations["next-phase"].animation=nextPhaseDuration,durations["next-phase"].delay=nextDelay,phaseThreshold){case!1:durations["next-phase"].total=nextPhaseDurationTotal,durations["step-total"]=currentPhaseDurationTotal>nextPhaseDurationTotal?currentPhaseDurationTotal:nextPhaseDurationTotal;break;case!0:durations["next-phase-threshold"]=currentPhaseDurationTotal,durations["next-phase"].total=currentPhaseDurationTotal+nextPhaseDurationTotal,durations["step-total"]=currentPhaseDurationTotal+nextPhaseDurationTotal;break;default:durations["next-phase-threshold"]=phaseThreshold;var nextPhaseDurationIncThreshold=nextPhaseDurationTotal+phaseThreshold;durations["next-phase"].total=nextPhaseDurationIncThreshold,durations["step-total"]=currentPhaseDurationTotal>nextPhaseDurationIncThreshold?currentPhaseDurationTotal:nextPhaseDurationIncThreshold}return durations},reversePhase:function(phase){var reversePhase={"animate-out":"animate-in","animate-in":"animate-out"};return reversePhase[phase]},domDelay:function(callback){setTimeout(function(){callback()},domThreshold)},reverseTimingFunction:function(timingFunction){if(self.options.reverseEaseWhenNavigatingBackwards===!1)return timingFunction;var timingFunctionToCubicBezier={linear:"cubic-bezier(0.0,0.0,1.0,1.0)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1.0)","ease-in":"cubic-bezier(0.42, 0.0, 1.0, 1.0)","ease-in-out":"cubic-bezier(0.42, 0.0, 0.58, 1.0)","ease-out":"cubic-bezier(0.0, 0.0, 0.58, 1.0)"};timingFunction.indexOf("cubic-bezier")<0&&(timingFunction=timingFunctionToCubicBezier[timingFunction]);for(var cubicBezier=timingFunction.replace("cubic-bezier(","").replace(")","").split(","),cubicBezierLength=cubicBezier.length,i=0;cubicBezierLength>i;i++)cubicBezier[i]=parseFloat(cubicBezier[i]);var reversedCubicBezier=[1-cubicBezier[2],1-cubicBezier[3],1-cubicBezier[0],1-cubicBezier[1]];return timingFunction="cubic-bezier("+reversedCubicBezier+")"},getStepProperties:function(step,phase){var stepProperties={};return stepProperties.duration=self.animationMap[step][phase].maxDuration,stepProperties.delay=self.animationMap[step][phase].maxDelay,stepProperties.computedDuration=self.animationMap[step][phase].computedDuration,stepProperties.elements=self.animationMap[step][phase].elements,stepProperties.noOfElements=self.animationMap[step][phase].noOfElements,stepProperties},resetInheritedSpeed:function(step,phase){for(var stepElements=self.animationMap[step][phase].elements,numberOfStepElements=self.animationMap[step][phase].noOfElements,i=0;numberOfStepElements>i;i++){var stepProperties=stepElements[i];stepProperties.element.style.transition="0ms 0ms"}setTimeout(function(){for(var i=0;numberOfStepElements>i;i++){var stepProperties=stepElements[i];stepProperties.element.style.transition=""}},domThreshold)},getShortestDirection:function(nextId,currentId,noOfSteps){var forwardDirection,reverseDirection,direction;return nextId>currentId?(forwardDirection=nextId-currentId,reverseDirection=currentId+(noOfSteps-nextId)):(reverseDirection=currentId-nextId,forwardDirection=nextId+(noOfSteps-currentId)),direction=reverseDirection>=forwardDirection?1:-1},getDirection:function(id,direction){var _animation=this;return void 0!==direction?direction:(self.options.reverseAnimationsWhenNavigatingBackwards===!0?void 0===direction&&self.options.cycle===!0?direction=_animation.getShortestDirection(id,self.currentStepId,self.noOfSteps):void 0===direction&&(direction=id<self.currentStepId?-1:1):direction=1,direction)}},self._preload={init:function(callback){var _preload=this;if(self.options.preloader!==!1){addClass(self.element,"sequence-preloading"),self.preloader=self._ui.getElement("preloader",self.options.preloader),_preload.append(),_preload.addStyles(),_preload.hideAndShowSteps("hide");var stepImagesToPreload=this.saveImagesToArray(self.options.preloadTheseSteps),individualImagesToPreload=this.saveImagesToArray(self.options.preloadTheseImages,!0),imagesToPreload=stepImagesToPreload.concat(individualImagesToPreload),imgLoad=imagesLoaded(imagesToPreload);imgLoad.on("always",function(){_preload.complete(callback)});var progress=1;imgLoad.on("progress",function(instance,image){var result=image.isLoaded?"loaded":"broken";self.preloadProgress(result,image.img.src,progress++,imagesToPreload.length)})}},complete:function(callback){self.preloaded(),this.hideAndShowSteps("show"),removeClass(self.element,"sequence-preloading"),addClass(self.element,"sequence-preloaded"),this.hide(),callback()},defaultStyles:".sequence-preloader {position: absolute;z-index: 9999;height: 100%;width: 100%;}.sequence-preloader .preload .circle {position: relative;top: -50%;display: inline-block;height: 12px;width: 12px;fill: #ff9442;animation: preload 1s infinite;}.preload {position: relative;top: 50%;display: block;height: 12px;width: 48px;margin: -6px auto 0 auto;}.preload-complete {opacity: 0;visibility: hidden;"+ModernizrSeq.prefixed("transition")+": .5s;}.preload.fallback .circle {float: left;margin-right: 4px;background-color: #ff9442;border-radius: 6px;}",addStyles:function(){if(self.options.preloader===!0){var head=document.head||document.getElementsByTagName("head")[0];if(this.styleElement=document.createElement("style"),this.styleElement.type="text/css",this.styleElement.styleSheet?this.styleElement.styleSheet.cssText=this.defaultStyles:this.styleElement.appendChild(document.createTextNode(this.defaultStyles)),head.appendChild(this.styleElement),ModernizrSeq.svg===!1){var preloadIndicator=self.preloader.firstChild;this.preloadIndicatorTimer=setInterval(function(){self._ui.hide(preloadIndicator,500,function(){self._ui.show(preloadIndicator,500)})},1e3)}}},removeStyles:function(){this.styleElement.parentNode.removeChild(this.styleElement)},saveImagesToArray:function(images,srcOnly){var imagesToPreload=[];if(isArray(images)===!1)return imagesToPreload;var imageLength=images.length;if(srcOnly!==!0)for(var i=0;imageLength>i;i++)for(var step=self.steps[i],imagesInStep=step.getElementsByTagName("img"),imagesInStepLength=imagesInStep.length,j=0;imagesInStepLength>j;j++){var image=imagesInStep[j];imagesToPreload.push(image)}else for(var img=[],i=0;imageLength>i;i++){var src=images[i];img[i]=new Image,img[i].src=src,imagesToPreload.push(img[i])}return imagesToPreload},hide:function(){var _preload=this;self.transitionsSupported===!0?addClass(self.preloader,"preload-complete"):self._ui.hide(self.preloader,500),clearInterval(this.preloadIndicatorTimer),setTimeout(function(){_preload.remove()},500)},append:function(){self.options.preloader===!0&&0===self.preloader.length&&(self.preloader=document.createElement("div"),self.preloader.className="sequence-preloader",self.preloader=[self.preloader],self.preloader[0].innerHTML=ModernizrSeq.svg===!0?'<svg class="preload" xmlns="http://www.w3.org/2000/svg"><circle class="circle" cx="6" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" /></circle><circle class="circle" cx="22" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" begin="150ms" repeatCount="indefinite" /></circle><circle class="circle" cx="38" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" begin="300ms" repeatCount="indefinite" /></circle></svg>':'<div class="preload fallback"><div class="circle"></div><div class="circle"></div><div class="circle"></div></div>',self.element.insertBefore(self.preloader[0],null))},remove:function(){self.preloader[0].parentNode.removeChild(self.preloader[0]),self.options.preloader===!0&&this.removeStyles()},hideAndShowSteps:function(type){if(self.options.hideStepsUntilPreloaded===!0&&0!==self.preloader.length)for(var i=0;i<self.noOfSteps;i++){var step=self.steps[i];"hide"===type?self._ui.hide(step,0):self._ui.show(step,0)}}},self.manageEvent={init:function(){this.add.windowLoad(),self.options.swipeNavigation===!0&&this.add.swipeNavigation(),self.options.keyNavigation===!0&&this.add.keyNavigation(),self.options.animateCanvas===!0&&this.add.resizeThrottle(),self.options.nextButton!==!1&&(self.nextButton=self._ui.getElement("nextButton",self.options.nextButton),this.add.button(self.nextButton,self.next)),self.options.prevButton!==!1&&(self.prevButton=self._ui.getElement("prevButton",self.options.prevButton),this.add.button(self.prevButton,self.prev)),self.options.pauseButton!==!1&&(self.pauseButton=self._ui.getElement("pauseButton",self.options.pauseButton),this.add.button(self.pauseButton,self.togglePause)),this.add.pauseOnHover(),self.options.pagination!==!1&&(self.pagination=self._ui.getElement("pagination",self.options.pagination),this.add.pagination(self.pagination))},add:{windowLoad:function(){addEventListener_cb(window,"load",function(){windowLoaded=!0})},button:function(elements,callback){for(var elementLength=elements.length,i=0;elementLength>i;i++){var element=elements[i];addEventListener_cb(element,"click",function(){callback()})}},pagination:function(elements){for(var elementLength=elements.length,i=0;elementLength>i;i++){var element=elements[i];addEventListener_cb(element,"click",function(e){var id=getPaginationIndex(this,e.target);self.goTo(id)})}},pauseOnHover:function(){var insideElement=function(element,cursor){var elementLeft=element.offsetLeft,elementRight=elementLeft+element.clientWidth,elementTop=element.offsetTop,elementBottom=elementTop+element.clientHeight;return cursor.clientX>=elementLeft&&cursor.clientX<=elementRight&&cursor.clientY>=elementTop&&cursor.clientY<=elementBottom?!0:!1},previouslyInside=!1;addEventListener_cb(self.element,"mousemove",function(e){insideElement(this,e)===!0?(previouslyInside===!1&&self.options.pauseOnHover===!0&&self._autoPlay.pause(),previouslyInside=!0):(previouslyInside===!0&&self.isHardPaused===!1&&self.options.pauseOnHover===!0&&self._autoPlay.unpause(),previouslyInside=!1)}),addEventListener_cb(self.element,"mouseleave",function(){self.isHardPaused===!1&&self.options.pauseOnHover===!0&&self._autoPlay.unpause(),previouslyInside=!1})},swipeNavigation:function(){Hammer(self.element,self.options.swipeHammerOptions).on("dragleft dragright release",function(e){switch(e.type){case"dragleft":case"dragright":e.gesture.preventDefault();break;case"release":switch(e.gesture.direction){case"left":self.options.swipeEvents.left(self);break;case"right":self.options.swipeEvents.right(self);break;case"up":self.options.swipeEvents.up!==!1&&self.options.swipeEvents.up(self);break;case"down":self.options.swipeEvents.down!==!1&&self.options.swipeEvents.down(self)}}})},keyNavigation:function(){addEventListener_cb(window,"keydown",function(e){var keyCodeChar=parseInt(String.fromCharCode(e.keyCode));switch(keyCodeChar>0&&keyCodeChar<=self.noOfSteps&&self.options.numericKeysGoToFrames&&self.goTo(keyCodeChar),e.keyCode){case 37:self.options.keyEvents.left(self);break;case 39:self.options.keyEvents.right(self)}})},resizeThrottle:function(){function throttledEvents(){self._animation.moveCanvas(self.currentStepId,!1),self.throttledResize()}var throttleTimer;addEventListener_cb(window,"resize",function(){clearTimeout(throttleTimer),throttleTimer=setTimeout(throttledEvents,resizeThreshold)})}},remove:{keyNavigation:function(){},resizeThrottle:function(){}}},self._init=function(element){self.element=element,self.canvas=element.querySelectorAll(".sequence-canvas"),self.steps=element.querySelectorAll(".sequence-canvas > li"),self.noOfSteps=self.steps.length,self.transitionsSupported=ModernizrSeq.csstransitions,self.animationMap=self._getAnimationMap.init(element),self.manageEvent.init(),self._autoPlay.init(),removeNoJsClass(self),self._firstRun=!0;var id=self.options.startingStepId;if(1===self.options.autoPlayDirection){var prevStepId=id-1;self.currentStepId=1>prevStepId?self.noOfSteps:prevStepId}else{var prevStepId=id+1;self.currentStepId=prevStepId>self.noOfSteps?1:prevStepId}var prevStep="step"+self.currentStepId;self.elementsAnimating=[];var goToFirstStep=function(){self.options.autoPlay===!0&&self.unpaused(),self.goTo(id,self.options.autoPlayDirection,!0),self._animation.domDelay(function(){self._animation.resetInheritedSpeed(prevStep,"animate-out")})};self.options.preloader!==!1?self._preload.init(function(){goToFirstStep()}):goToFirstStep()},self.destroy=function(){},self.next=function(){var nextStepId=self.currentStepId+1;nextStepId>self.noOfSteps&&self.options.cycle===!0&&(nextStepId=1),self.goTo(nextStepId)},self.prev=function(){var prevStepId=self.currentStepId-1;1>prevStepId&&self.options.cycle===!0&&(prevStepId=self.noOfSteps),self.goTo(prevStepId)},self.togglePause=function(){self.isPaused===!1?self.pause():self.unpause()},self.pause=function(){self.isHardPaused=!0,self._autoPlay.pause()},self.unpause=function(){self.isHardPaused=!1,self._autoPlay.unpause()},self.goTo=function(id,direction,ignorePhaseThreshold){if(direction=self._animation.getDirection(id,direction),void 0===id||1>id||id>self.noOfSteps||id===self.currentStepId||self.options.navigationSkip===!1&&self.isActive===!0||self.options.navigationSkip===!0&&self.navigationSkipThresholdActive===!0||self.options.preventReverseSkipping===!0&&self.direction!==direction&&self.isActive===!0)return!1;if(self.direction=direction,void 0===ignorePhaseThreshold){self.options.phaseThreshold}else;var currentStep="step"+self.currentStepId,nextStep="step"+id,currentStepElement=self.animationMap[currentStep].element,nextStepElement=self.animationMap[nextStep].element;self._animation.moveActiveFrameToTop(currentStepElement,nextStepElement),self._animation.manageNavigationSkip(id,direction,currentStep,nextStep,nextStepElement),self.isActive=!0,self._animation.changeStep(id),self._animation.moveCanvas(id,!0),self._animation.resetInheritedSpeed(nextStep,"animate-out");var stepDurations=self._animation.getStepDurations(id,nextStep,currentStep,direction);1===direction?self._animation.forward(id,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations):self._animation.reverse(id,nextStep,nextStepElement,currentStep,currentStepElement,stepDurations)},self.paused=function(){},self.unpaused=function(){},self.animationStarted=function(){},self.animationFinished=function(){},self.currentPhaseEnded=function(){},self.nextPhaseEnded=function(){},self.throttledResize=function(){},self.preloaded=function(){console.log("preloaded")},self.preloadProgress=function(result,src,progress,length){console.log("image is "+result+" for "+src),console.log("progress: "+progress+" of "+length)},self.options=extend(defaults,options),self.options.windowLoaded===!0&&(windowLoaded=self.options.windowLoaded),self._init(element,options),self}var domThreshold=50,resizeThreshold=100,windowLoaded=!1,defaults={startingStepId:1,startingStepAnimatesIn:!1,cycle:!0,phaseThreshold:!1,reverseAnimationsWhenNavigatingBackwards:!0,reverseEaseWhenNavigatingBackwards:!0,moveActiveFrameToTop:!0,windowLoaded:!1,animateCanvas:!0,animateCanvasDuration:500,autoPlay:!1,autoPlayDirection:1,autoPlayThreshold:3e3,navigationSkip:!0,navigationSkipThreshold:250,fadeStepWhenSkipped:!0,fadeStepTime:500,preventReverseSkipping:!1,nextButton:!0,prevButton:!0,pauseButton:!0,unpauseThreshold:null,pauseOnHover:!0,pagination:!0,preloader:!0,preloadTheseSteps:[1],preloadTheseImages:["images/model2.png","images/model3.png"],hideStepsUntilPreloaded:!0,keyNavigation:!0,numericKeysGoToFrames:!0,keyEvents:{left:function(self){self.prev()},right:function(self){self.next()}},swipeNavigation:!0,swipeEvents:{left:function(self){self.prev()},right:function(self){self.next()},up:!1,down:!1},swipeHammerOptions:{},hashTags:!1,hashDataAttribute:!1,hashChangesOnFirstFrame:!1,fallback:{theme:"slide",speed:500}};return Sequence}"function"==typeof define&&define.amd?define(["third-party/modernizr.min"],["third-party/imagesloaded.pkgd.min"],["third-party/hammer.min"],defineSequence):global.sequence=defineSequence(ModernizrSeq,imagesLoaded,Hammer)}(this);
//# sourceMappingURL=sequence.min.map