/*
 * Sequence
 *
 * The open-source CSS animation framework for creating responsive sliders,
 * presentations, banners, and other step-based applications.
 *
 * @link https://github.com/IanLunn/Sequence
 * @author IanLunn
 * @version 2.0.0-alpha.6
 * @license https://github.com/IanLunn/Sequence/blob/master/LICENSE
 * @copyright Ian Lunn 2014
 */
function defineSequence(a,b){"use strict";var c=function(c,d){function e(a){return"[object Array]"===Object.prototype.toString.call(a)?!0:!1}function f(a,b){for(var c in b)a[c]=b[c];return a}function g(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,"")[b]:void 0}function h(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1),c;if(a.attachEvent){var d=function(){c.call(a)};return a.attachEvent("on"+b,d),d}}function i(a,b,c){a.addEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function j(a,b){return a.getElementsByClassName===!0?a.getElementsByClassName(b):function(a,b){null===b&&(b=document);var c,d,e=[],f=b.getElementsByTagName("*"),g=f.length,h=new RegExp("(^|\\s)"+a+"(\\s|$)");for(c=0,d=0;g>c;c++)h.test(f[c].className)&&(e[d]=f[c],d++);return e}(b,a)}function k(a){var b,c;return c=a.indexOf("ms")>-1?1:1e3,b="0s"==a?0:parseFloat(a.replace("s",""))*c}function l(a,b){return void 0!==a?new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className):void 0}function m(a,b){var c,d,f;for(e(a)===!1&&(d=1,a=[a]),d=a.length,f=0;d>f;f++)c=a[f],l(c,b)===!1&&(c.className+=(c.className?" ":"")+b)}function n(a,b){var c,d,f;for(e(a)===!1?(d=1,a=[a]):d=a.length,f=0;d>f;f++)c=a[f],l(c,b)===!0&&(c.className=c.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function o(a){if(a.isFallbackMode!==!0)for(var b=0;b<a.steps.length;b++){var c=a.steps[b];if(l(c,"animate-in")===!0){var d="step"+(b+1);a._animation.resetInheritedSpeed(d,"animate-in"),n(c,"animate-in")}}}function p(a){return a.replace("data-","").replace(/\W+(.)/g,function(a,b){return b.toUpperCase()})}function q(a,b){var c,d,e,f,g=b.length,h={};if(void 0!==a.dataset)h=a.dataset;else for(f=0;g>f;f++)c=b[f],d=p(c),e=a.getAttribute(c),null!==e&&(h[d]=e);return h}function r(a){for(var b in a){var c=a[b];if(y===!1&&(c.hasOwnProperty("seqZ")===!0||c.hasOwnProperty("seqRotateX")===!0||c.hasOwnProperty("seqRotateY")===!0))return!0}return!1}function s(a,b,c){if("BODY"===b.nodeName)return!1;if(a!==b)return c=b,s(a,b.parentNode,c);if(void 0!==c)for(var d=c,e=a.getElementsByTagName(d.nodeName),f=e.length;f--;)if(d===e[f])return f+1}function t(a){var b,c,d=[],e=a.getElementsByTagName("*"),f=e.length;for(c=0;f>c;c++)b=e[c],a=b.parentNode,l(a,"seq-canvas")===!0&&d.push(b);return d}function u(a,b){var c="";return c+="translateX("+a.seqX+"px) ",c+="translateY("+a.seqY+"px) ",c+="translateZ("+a.seqZ+"px) ",b!==!0?(c+="rotateX("+a.seqRotateX+"deg) ",c+="rotateY("+a.seqRotateY+"deg) ",c+="rotateZ("+a.seqRotate+"deg) ",c+="scale("+a.seqScale+")"):(c+="rotateZ("+a.seqRotate+"deg) ",c+="rotateY("+a.seqRotateY+"deg) ",c+="rotateX("+a.seqRotateX+"deg) "),c}if("true"!==c.getAttribute("data-seq-enabled")){c.setAttribute("data-seq-enabled",!0);var v={startingStepId:1,startingStepAnimatesIn:!1,cycle:!0,phaseThreshold:!0,reverseWhenNavigatingBackwards:!1,moveActiveStepToTop:!0,require3d:"auto",transformOriginWorkaround:!0,animateCanvas:!0,animateCanvasDuration:500,autoPlay:!0,autoPlayThreshold:5e3,autoPlayDirection:1,navigationSkip:!0,navigationSkipThreshold:250,fadeStepWhenSkipped:!1,fadeStepTime:500,preventReverseSkipping:!1,nextButton:!0,prevButton:!0,pauseButton:!0,unpauseThreshold:null,pauseOnHover:!0,pagination:!0,preloader:!1,preloadTheseSteps:[1],preloadTheseImages:[],hideStepsUntilPreloaded:!0,keyNavigation:!1,numericKeysGoToSteps:!1,keyEvents:{left:function(a){a.prev()},right:function(a){a.next()}},swipeNavigation:!0,swipeEvents:{left:function(a){a.next()},right:function(a){a.prev()},up:!1,down:!1},swipeHammerOptions:{preventMouse:!0,dragMinDistance:10,stopBrowserBehavior:!1},hashTags:!1,hashDataAttribute:!1,hashChangesOnFirstStep:!1,fallback:{speed:500}},w=50,x=100,y=!1,z=["data-seq-x","data-seq-y","data-seq-z","data-seq-rotate-x","data-seq-rotate-y","data-seq-rotate","data-seq-scale"],A=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+v.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.8.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={svg:"http://www.w3.org/2000/svg"},x={},y=[],z=y.slice,A=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',p,'">',a,"</style>"].join(""),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=o.style.overflow,o.style.overflow="hidden",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},B={}.hasOwnProperty;l=e(B,"undefined")||e(B.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return B.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=z.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(z.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(z.call(arguments)))};return d}),x.cssanimations=function(){return i("animationName")},x.csstransforms=function(){return!!i("transform")},x.csstransitions=function(){return i("transition")},x.svg=function(){return!!b.createElementNS&&!!b.createElementNS(w.svg,"svg").createSVGRect};for(var C in x)l(x,C)&&(k=C.toLowerCase(),n[k]=x[C](),y.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._prefixes=s,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=A,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(this,window.document),B=A.prefixed("transformOrigin");B!==!1&&(B=B.replace("mO","m-o")),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1});var C={};return C._getAnimationMap={init:function(a,b){if(this.animationMap={},C.isFallbackMode===!1)this.clonedSequence=this.createClone(a),this.clonedCanvas=j(this.clonedSequence,"seq-canvas")[0],this.clonedSteps=t(this.clonedCanvas),this.originalClasses=this.clonedSequence.className,this.animationMap.stepsAnimating=0,this.steps(b),this.destroyClone(this.clonedSequence);else for(var c=0;c<C.noOfSteps;c++){var d="step"+(c+1);this.animationMap[d]={},this.animationMap[d].element=C.steps[c]}return this.animationMap},dataAttributes:function(){var a,b,c,d={};for(a=0;a<C.noOfSteps;a++){b=C.steps[a],c="step"+(a+1);var e=q(b,z);d[c]=e}return d},getTransformProperties:function(a,b,c){var d,e,f,h,i,j,k={},l={},m=0,n=0,o=0;d=void 0!==c?c[a]:C.animationMap[a].dataAttributes,k={seqX:0,seqY:0,seqZ:0,seqRotateX:0,seqRotateY:0,seqRotate:0,seqScale:1},l={seqX:0,seqY:0,seqZ:0,seqRotateX:0,seqRotateY:0,seqRotate:0,seqScale:1};for(h in d)d.hasOwnProperty(h)===!0&&(e=d[h],k[h]=e,f="seqScale"!==h?-1*e:1/e,l[h]=f);l.seqX+=-1*b.offsetLeft,l.seqY+=-1*b.offsetTop,i=g(b,[A.prefixed("transformOrigin")]),void 0!==i&&(j=i.split(" "),m=parseFloat(j[0]),n=parseFloat(j[1]),void 0!==j[2]&&(o=parseFloat(j[2]))),this.animationMap[a].transformOrigin={x:m,y:n,z:o},this.animationMap[a].dataAttributes=d,this.animationMap[a].stepTransform=k,this.animationMap[a].canvasTransform=l},steps:function(a){var b,c,d,e,f,g,h,i;for(i=0;i<C.noOfSteps;i++)b="step"+(i+1),c=this.clonedSteps[i],d=C.steps[i],e=c.getElementsByTagName("*"),f=d.getElementsByTagName("*"),g=e.length,this.animationMap[b]={},this.animationMap[b].element=d,this.getTransformProperties(b,d,a),h=u(this.animationMap[b].stepTransform),d.style[A.prefixed("transition")]="0ms 0ms",d.style[A.prefixed("transform")]=h,C._animation.domDelay(function(){d.style[A.prefixed("transition")]=""}),C.requires3d===!0&&(d.style[A.prefixed("transformStyle")]="preserve-3d"),m(this.clonedSequence,b),this.phases("animate-in",b,c,e,f,g),this.phases("animate-out",b,c,e,f,g),n(this.clonedSequence,b)},phases:function(a,b,c,d,e,f){var h,i,j,l,o,p,q=[],r={};for(m(c,a),this.animationMap[b][a]={},p=0;f>p;p++){l=d[p],o=e[p],r={};var s=k(g(l,A.prefixed("transitionDuration"))),t=k(g(l,A.prefixed("transitionDelay"))),u=g(l,A.prefixed("transitionTimingFunction")),v=s+t;0!==v&&(r.element=o,r.duration=s,r.delay=t,r.timingFunction=u,q.push(r),(void 0===h||s>h)&&(h=s),(void 0===i||t>i)&&(i=t),(void 0===j||v>j)&&(j=v))}n(c,a),this.animationMap[b][a].elements=q,this.animationMap[b][a].noOfElements=q.length,this.animationMap[b][a].maxDuration=h,this.animationMap[b][a].maxDelay=i,this.animationMap[b][a].computedDuration=j},createClone:function(a){var b=a.cloneNode(!0);return b.style.display="none",b.id="sequence",a.parentNode.insertBefore(b,a),b},destroyClone:function(a){a.parentNode.removeChild(a)}},C._ui={defaultElements:{nextButton:"seq-next",prevButton:"seq-prev",pauseButton:"seq-pause",pagination:"seq-pagination",preloader:"seq-preloader"},getElements:function(a,b){var c,d,e,f,g,h=[];if(b===!0)d=j(document,this.defaultElements[a]);else{var i=b.substr(0,1),k=b.substr(1);"."===i?d=j(document,k):"#"===i&&(d=[document.getElementById(k)])}for(e=d.length,g=0;e>g;g++)c=d[g],f=c.getAttribute("rel"),(null===f||f===C.container.getAttribute("id"))&&h.push(c);return h},show:function(a,b){C.transitionsSupported===!0?(a.style[A.prefixed("transitionDuration")]=b+"ms",a.style[A.prefixed("transitionProperty")]="opacity, "+A.prefixed("transform"),a.style.opacity=1):C._animationFallback.animate(a,"opacity","",0,1,b)},hide:function(a,b,c){C.transitionsSupported===!0?(a.style[A.prefixed("transitionDuration")]=b+"ms",a.style[A.prefixed("transitionProperty")]="opacity, "+A.prefixed("transform"),a.style.opacity=0):C._animationFallback.animate(a,"opacity","",1,0,b),void 0!==c&&setTimeout(function(){c()},b)}},C._autoPlay={init:function(){C.isAutoPlayActive=!1,C.options.unpauseThreshold=null===C.options.unpauseThreshold?C.options.autoPlayThreshold:C.options.unpauseThreshold,C.options.autoPlay===!0&&C.isPaused===!1&&this.start()},unpause:function(){C.options.autoPlay===!0&&(C.isPaused=!1,this.start(),n(C.container,"seq-paused"),n(C.pauseButton,"seq-paused"),C.unpaused(C))},pause:function(){C.isPaused=!0,this.stop(),m(C.container,"seq-paused"),m(C.pauseButton,"seq-paused"),C.paused(C)},start:function(){var a;a=C.isPaused===!1?C.options.autoPlayThreshold:C.options.unpauseThreshold,C.isAutoPlayActive=!0,clearTimeout(C.autoPlayTimer),C.autoPlayTimer=setTimeout(function(){1===C.options.autoPlayDirection?C.next():C.prev()},a)},stop:function(){C.isAutoPlayActive=!1,clearTimeout(C.autoPlayTimer)}},C._canvas={getTransformCss:function(a){var b,c="step"+a,d=C.animationMap[c].transformOrigin,e=C.animationMap[c].canvasTransform,f=(C.animationMap[c].stepTransform,d.x+-1*e.seqX),g=d.y+-1*e.seqY,h=d.z+-1*e.seqZ;return b=u(e,!0),{origins:f+"px "+g+"px "+h+"px",string:b,scale:e.seqScale}},setup:function(){C.screen.style.height="100%",C.screen.style.width="100%",C.requires3d===!0&&(C.screen.style[A.prefixed("transformStyle")]="preserve-3d",C.canvas.style[A.prefixed("transformStyle")]="preserve-3d")},move:function(a,b){if(C.options.animateCanvas===!0){var c,d=C.canvas,e=0;b===!0&&C._firstRun===!1&&(e=C.options.animateCanvasDuration),C.isFallbackMode===!1&&(c=this.getTransformCss(a),C.screen.style[A.prefixed("transitionDuration")]=e+"ms",C.screen.style[A.prefixed("transitionProperty")]=A.prefixed("transform"),C.screen.style[A.prefixed("transform")]=C.transformOriginSupported===!0?"scale("+c.scale+")":"translateZ("+c.origins.split(" ")[2]+") scale("+c.scale+")",d.style[A.prefixed("transitionDuration")]=e+"ms",d.style[A.prefixed("transitionProperty")]=A.prefixed("transform")+", "+B,d.style[A.prefixed("transformOrigin")]=c.origins,d.style[A.prefixed("transform")]=c.string)}}},C._animation={moveActiveStepToTop:function(a,b){if(C.options.moveActiveStepToTop===!0){var c=C.animationMap["step"+C.prevStepId].element;c.style.zIndex=1,a.style.zIndex=C.noOfSteps-1,b.style.zIndex=C.noOfSteps}},manageNavigationSkip:function(a,b,c,d,e){if(C.isFallbackMode!==!0){if(C._ui.show(e,0),C.options.navigationSkip===!0){C.navigationSkipThresholdActive=!0;var f=C.animationMap.stepsAnimating;if(C.animationMap[c].isAnimating=!0,C.animationMap[d].isAnimating=!0,C.animationMap.stepsAnimating+=2,0!==f&&(clearTimeout(C.phaseThresholdTimer),C.options.fadeStepWhenSkipped===!0))for(var g=1;g<=C.noOfSteps;g++){var h="step"+g,i=C.animationMap[h];if(i.isAnimating===!0&&g!==a){var j=i.element;C._animation.stepSkipped(b,h,j)}}setTimeout(function(){C.navigationSkipThresholdActive=!1},C.options.navigationSkipThreshold)}}},stepSkipped:function(a,b,c){C._ui.hide(c,C.options.fadeStepTime,function(){})},changeStep:function(a){var b="seq-step"+a;if(void 0!==C.currentStepId){var c="seq-step"+C.currentStepId;m(C.container,b),n(C.container,c)}else m(C.container,b)},reverseProperties:function(a,b,c){for(var d=this,e=C.animationMap[a][b],f=0;f<e.noOfElements;f++){var g=e.elements[f];g.element.style[A.prefixed("transition")]=c.animation+"ms "+c.delay+"ms "+d.reverseTimingFunction(g.timingFunction)}setTimeout(function(){for(var a=0;a<e.noOfElements;a++){var b=e.elements[a];b.element.style[A.prefixed("transition")]=""}},c.total)},forward:function(a,b,c,d,e,f,g){var h=this;n(c,"animate-out"),h.domDelay(function(){m(e,"animate-out"),n(e,"animate-in"),h.startAnimateIn(a,1,b,c,d,e,f,g)})},reverse:function(a,b,c,d,e,f,g){var h=this;m(c,"animate-out"),h.domDelay(function(){h.reverseProperties(d,"animate-out",f.currentPhase),h.reverseProperties(b,"animate-in",f.nextPhase),n(e,"animate-in"),h.startAnimateIn(a,-1,b,c,d,e,f,g)})},startAnimateIn:function(a,b,c,d,e,f,g,h){var i=this,j=0,k=0,l=0,o=0;C.prevStepId=C.currentStepId,C.currentStepId=a,C.animationStarted(a,C),i._currentPhaseStarted(),C._firstRun===!1?(j=g.currentPhase.total,k=g.nextPhase.total,l=g.nextPhaseThreshold,o=g.stepTotal,C.phaseThresholdTimer=setTimeout(function(){i._nextPhaseStarted(h),m(d,"animate-in"),n(d,"animate-out")},l)):(C.options.startingStepAnimatesIn===!1?i.resetInheritedSpeed(c,"animate-in"):(k=g.nextPhase.total,o=k),i._nextPhaseStarted(h),C._firstRun=!1,m(d,"animate-in"),n(d,"animate-out")),i.phaseEnded(j,e,i._currentPhaseEnded),i.phaseEnded(k,c,i._nextPhaseEnded),i.stepEnded(a,o)},_currentPhaseStarted:function(){C.currentPhaseStarted(C),C._pagination.update()},_currentPhaseEnded:function(){C.currentPhaseEnded(C)},_nextPhaseStarted:function(a){void 0===a&&C._hashTags.update(),C.nextPhaseStarted(C)},_nextPhaseEnded:function(){C.nextPhaseEnded(C)},phaseEnded:function(a,b,c){C.phaseEndedTimer=setTimeout(function(){C.animationMap[b].isAnimating=!1,C.animationMap.stepsAnimating-=1,c()},a)},stepEnded:function(a,b){C.stepEndedTimer=setTimeout(function(){C._autoPlay.init(),C.isActive=!1,C.animationFinished(a,C)},b)},getStepDurations:function(a,b,c,d){if(C.isFallbackMode!==!0){var e={};e.currentPhase={},e.nextPhase={},e.currentPhase.animation=0,e.currentPhase.delay=0,e.currentPhase.total=0,e.nextPhase.animation=0,e.nextPhase.delay=0,e.nextPhase.total=0,e.nextPhaseThreshold=0,e.stepTotal=0;var f=0,g=0,h=0,i=0,j=C.options.phaseThreshold;if(1===d)g=C.animationMap[c]["animate-out"].computedDuration,f=C.animationMap[b]["animate-in"].computedDuration;else{if(j!==!0){var k=C.animationMap[c]["animate-in"].maxDuration-C.animationMap[b]["animate-out"].maxDuration;k>0?h=k:i=Math.abs(k)}g=C.animationMap[c]["animate-in"].maxDuration,f=C.animationMap[b]["animate-out"].maxDuration,h+=C.animationMap[c]["animate-in"].maxDelay,i+=C.animationMap[b]["animate-out"].maxDelay}var l=g+i,m=f+h;switch(e.currentPhase.animation=g,e.currentPhase.delay=i,e.currentPhase.total=l,e.nextPhase.animation=f,e.nextPhase.delay=h,j){case!1:e.nextPhase.total=m,e.stepTotal=l>m?l:m;break;case!0:e.nextPhaseThreshold=l,e.nextPhase.total=l+m,e.stepTotal=l+m;break;default:e.nextPhaseThreshold=j;var n=m+j;e.nextPhase.total=n,e.stepTotal=l>n?l:n}return e}},reversePhase:function(a){var b={"animate-out":"animate-in","animate-in":"animate-out"};return b[a]},domDelay:function(a){setTimeout(function(){a()},w)},reverseTimingFunction:function(a){var b={linear:"cubic-bezier(0.0,0.0,1.0,1.0)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1.0)","ease-in":"cubic-bezier(0.42, 0.0, 1.0, 1.0)","ease-in-out":"cubic-bezier(0.42, 0.0, 0.58, 1.0)","ease-out":"cubic-bezier(0.0, 0.0, 0.58, 1.0)"};a.indexOf("cubic-bezier")<0&&(a=b[a]);for(var c=a.replace("cubic-bezier(","").replace(")","").split(","),d=c.length,e=0;d>e;e++)c[e]=parseFloat(c[e]);var f=[1-c[2],1-c[3],1-c[0],1-c[1]];return a="cubic-bezier("+f+")"},getStepProperties:function(a,b){var c={};return c.duration=C.animationMap[a][b].maxDuration,c.delay=C.animationMap[a][b].maxDelay,c.computedDuration=C.animationMap[a][b].computedDuration,c.elements=C.animationMap[a][b].elements,c.noOfElements=C.animationMap[a][b].noOfElements,c},resetInheritedSpeed:function(a,b){if(C.isFallbackMode!==!0){for(var c=C.animationMap[a][b].elements,d=C.animationMap[a][b].noOfElements,e=0;d>e;e++){var f=c[e];f.element.style[A.prefixed("transition")]="0ms 0ms"}setTimeout(function(){for(var a=0;d>a;a++){var b=c[a];b.element.style[A.prefixed("transition")]=""}},w)}},getShortestDirection:function(a,b,c){var d,e,f;return a>b?(d=a-b,e=b+(c-a)):(e=b-a,d=a+(c-b)),f=e>=d?1:-1},getDirection:function(a,b){var c=this;return void 0!==b?b:(C.options.reverseWhenNavigatingBackwards===!0||C.isFallbackMode===!0?void 0===b&&C.options.cycle===!0?b=c.getShortestDirection(a,C.currentStepId,C.noOfSteps):void 0===b&&(b=a<C.currentStepId?-1:1):b=1,b)},propertySupport:function(a){C.transitionsSupported=!1,C.animationsSupported=!1,C.transformStyleSupported=!1,C.transformOriginSupported=!0,C.isFallbackMode=!1,A.addTest("csstransformspreserve3d",function(){var a,b=A.prefixed("transformStyle"),c="preserve-3d";return b?(b=b.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-"),A.testStyles("#modernizr{"+b+":"+c+";}",function(c){a=window.getComputedStyle?getComputedStyle(c,null).getPropertyValue(b):""}),a===c):!1}),C.requires3d=r(a),C.requires3d===!0&&(A.csstransformspreserve3d===!0&&(C.transformStyleSupported=!0),C.options.transformOriginWorkaround!==!0||"WebkitTransformOrigin"!==A.prefixed("transformOrigin")||window.chrome&&"CSS"in window||(C.transformOriginSupported=!1)),A.csstransitions===!0&&(C.transitionsSupported=!0),A.cssanimations===!0&&(C.animationsSupported=!0),(C.transitionsSupported===!1||C.transformStyleSupported===!1&&C.requires3d===!0&&C.options.require3d!==!1)&&(C.isFallbackMode=!0)}},C._animationFallback={animate:function(a,b,c,d,e,f,g){if(a!==!1){var h=(new Date).getTime(),i=setInterval(function(){var j=Math.min(1,((new Date).getTime()-h)/f);a.style[b]=d+j*(e-d)+c,1===j&&(void 0!==g&&g(),clearInterval(i))},25);a.style[b]=d+c}},setupCanvas:function(){if(C.isFallbackMode===!0){m(C.container,"seq-fallback"),C.screen.style.overflow="hidden",C.canvas.style.width="100%",C.canvas.style.height="100%",C.screen.style.width="100%",C.screen.style.height="100%",this.canvasWidth=C.canvas.offsetWidth;for(var a=0;a<C.noOfSteps;a++){var b=C.steps[a];m(b,"animate-in"),b.style.width="100%",b.style.height="100%",b.style.position="absolute",b.style.whiteSpace="normal",b.style.left="100%"}}},moveCanvas:function(a,b,c,d){if(d===!0){var e=0,f=-100,g=100,h=0;-1===c&&(f=100,g=-100),this.animate(b,"left","%",e,f,C.options.fallback.speed),this.animate(a,"left","%",g,h,C.options.fallback.speed)}else b.style.left="-100%",a.style.left="0"},goTo:function(a,b,c,d,e,f,g){C.prevStepId=C.currentStepId,C.currentStepId=a,void 0===g&&C._hashTags.update(),C._firstRun===!1?(this.moveCanvas(e,c,f,!0),C.animationStarted(C.currentStepId,C)):(this.moveCanvas(e,c,f,!1),C._firstRun=!1),C._animation.stepEnded(a,C.options.fallback.speed),C._pagination.update()}},C._pagination={getLinks:function(a){var b,c,d,e,f=[];for(c=a.childNodes,d=c.length,e=0;d>e;e++)b=c[e],1===b.nodeType&&f.push(b);C.paginationLinks.push(f)},update:function(){if(void 0!==C.pagination){var a,b,c,d,e=C.currentStepId-1,f=C.pagination.length;if(void 0!==C.currentPaginationLinks)for(d=C.currentPaginationLinks.length,a=0;d>a;a++)c=C.currentPaginationLinks[a],n(c,"seq-current");for(C.currentPaginationLinks=[],b=0;f>b;b++)c=C.paginationLinks[b][e],C.currentPaginationLinks.push(c),m(c,"seq-current")}}},C._hashTags={init:function(a){if(C.options.hashTags===!0){var b,c;if(C.hasPushstate=!(!window.history||!history.pushState),c=location.hash.replace("#!",""),C.stepHashTags=this.getStepHashTags(),""===c)return a;C.currentHashTag=c,b=this.hasCorrespondingStep(),b>-1&&(a=b+1)}return a},hasCorrespondingStep:function(){var a=-1,b=C.stepHashTags.indexOf(C.currentHashTag);return b>-1&&(a=b),a},getStepHashTags:function(){for(var a,b=[],c=0;c<C.noOfSteps;c++)a=C.options.hashDataAttribute===!1?C.steps[c].id:C.steps[c].getAttribute("data-seq-hashtag"),b.push(a);return b},update:function(){if(C.options.hashTags===!0&&C._firstRun===!1||C.options.hashTags===!0&&C._firstRun===!0&&C.options.hashChangesOnFirstStep===!0){var a=C.currentStepId-1;C.currentHashTag=C.stepHashTags[a],""!==C.currentHashtag&&(C.hasPushstate===!0?history.pushState(null,null,"#!"+C.currentHashTag):location.hash="#!"+C.currentHashTag)}},setupEvent:function(){if("onhashchange"in window){if(window.addEventListener)return window.addHashChange=function(a,b){window.addEventListener("hashchange",a,b)},void(window.removeHashChange=function(a){window.removeEventListener("hashchange",a)});if(window.attachEvent)return window.addHashChange=function(a){window.attachEvent("onhashchange",a)},void(window.removeHashChange=function(a){window.detachEvent("onhashchange",a)})}var a=[],b=location.href;window.addHashChange=function(b,c){"function"==typeof b&&a[c?"unshift":"push"](b)},window.removeHashChange=function(b){for(var c=a.length-1;c>=0;c--)a[c]===b&&a.splice(c,1)},setInterval(function(){var c=location.href;if(b!==c){var d=b;b=c;for(var e=0;e<a.length;e++)a[e].call(window,{type:"hashchange",newURL:c,oldURL:d})}},100)}},C._preload={init:function(b){var c=this;if(C.options.preloader!==!1){m(C.container,"seq-preloading"),C.preloader=C._ui.getElements("preloader",C.options.preloader),c.append(),c.addStyles(),c.hideAndShowSteps("hide");var d=this.saveImagesToArray(C.options.preloadTheseSteps),e=this.saveImagesToArray(C.options.preloadTheseImages,!0),f=d.concat(e),g=a(f);g.on("always",function(){c.complete(b)});var h=1;g.on("progress",function(a,b){var c=b.isLoaded?"loaded":"broken";C.preloadProgress(c,b.img.src,h++,f.length,C)})}},complete:function(a){C.preloaded(C),this.hideAndShowSteps("show"),n(C.container,"seq-preloading"),m(C.container,"seq-preloaded"),this.hide(),a()},defaultStyles:".seq-preloader {position: absolute;z-index: 9999;height: 100%;width: 100%;top: 0;left:0;right:0;bottom:0;}.seq-preloader .preload .circle {position: relative;top: -50%;display: inline-block;height: 12px;width: 12px;fill: #ff9442;}.preload {position: relative;top: 50%;display: block;height: 12px;width: 48px;margin: -6px auto 0 auto;}.preload-complete {opacity: 0;visibility: hidden;"+A.prefixed("transition")+": .5s;}.preload.fallback .circle {float: left;margin-right: 4px;background-color: #ff9442;border-radius: 6px;}",addStyles:function(){if(C.options.preloader===!0){var a=document.head||document.getElementsByTagName("head")[0];if(this.styleElement=document.createElement("style"),this.styleElement.type="text/css",this.styleElement.styleSheet?this.styleElement.styleSheet.cssText=this.defaultStyles:this.styleElement.appendChild(document.createTextNode(this.defaultStyles)),a.appendChild(this.styleElement),A.svg===!1){var b=C.preloader[0].firstChild;this.preloadIndicatorTimer=setInterval(function(){b.style.visibility="hidden",setTimeout(function(){b.style.visibility="visible"},250)},500)}}},removeStyles:function(){this.styleElement.parentNode.removeChild(this.styleElement)},saveImagesToArray:function(a,b){var c=[];if(e(a)===!1)return c;var d,f,g=a.length;if(b!==!0)for(d=0;g>d;d++){var h=C.steps[d],i=h.getElementsByTagName("img"),j=i.length;for(f=0;j>f;f++){var k=i[f];c.push(k)}}else{var l=[];for(d=0;g>d;d++){var m=a[d];l[d]=new Image,l[d].src=m,c.push(l[d])}}return c},hide:function(){var a=this;C.transitionsSupported===!0?m(C.preloader,"preload-complete"):C._ui.hide(C.preloader[0],500),clearInterval(this.preloadIndicatorTimer),setTimeout(function(){a.remove()},500)},append:function(){C.options.preloader===!0&&0===C.preloader.length&&(C.preloader=document.createElement("div"),C.preloader.className="seq-preloader",C.preloader=[C.preloader],C.preloader[0].innerHTML=A.svg===!0?'<svg class="preload" xmlns="http://www.w3.org/2000/svg"><circle class="circle" cx="6" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" /></circle><circle class="circle" cx="22" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" begin="150ms" repeatCount="indefinite" /></circle><circle class="circle" cx="38" cy="6" r="6" opacity="0"><animate attributeName="opacity" values="0;1;0" dur="1s" begin="300ms" repeatCount="indefinite" /></circle></svg>':'<div class="preload fallback"><div class="circle"></div><div class="circle"></div><div class="circle"></div></div>',C.container.insertBefore(C.preloader[0],null))},remove:function(){C.preloader[0].parentNode.removeChild(C.preloader[0]),C.options.preloader===!0&&this.removeStyles()},hideAndShowSteps:function(a){if(C.options.hideStepsUntilPreloaded===!0&&0!==C.preloader.length)for(var b=0;b<C.noOfSteps;b++){var c=C.steps[b];"hide"===a?C._ui.hide(c,0):C._ui.show(c,0)}}},C.manageEvent={list:{load:[],click:[],touchstart:[],mousemove:[],mouseleave:[],hammer:[],keydown:[],hashchange:[],resize:[]},init:function(){this.add.hashChange(),C.options.swipeNavigation===!0&&this.add.swipeNavigation(),C.options.keyNavigation===!0&&this.add.keyNavigation(),this.add.resizeThrottle(),C.options.nextButton!==!1&&(C.nextButton=C._ui.getElements("nextButton",C.options.nextButton),this.add.button(C.nextButton,"nav",C.next)),C.options.prevButton!==!1&&(C.prevButton=C._ui.getElements("prevButton",C.options.prevButton),this.add.button(C.prevButton,"nav",C.prev)),C.options.pauseButton!==!1&&(C.pauseButton=C._ui.getElements("pauseButton",C.options.pauseButton),this.add.button(C.pauseButton,"nav",C.togglePause)),this.add.pauseOnHover(),C.options.pagination!==!1&&(C.paginationLinks=[],C.pagination=C._ui.getElements("pagination",C.options.pagination),this.add.button(C.pagination,"pagination"))},remove:function(a){var b=C.manageEvent.list[a],c=b.length;switch(a){case"hashchange":removeHashChange(b[0].handler);break;case"hammer":if(C.manageEvent.list.hammer.length>0&&void 0!==document.querySelectorAll){var d=C.manageEvent.list.hammer[0].handler;C.hammerTime.off("dragleft dragright release",d)}break;default:for(var e=0;c>e;e++){var f=b[e];i(f.element,a,f.handler)}}},add:{hashChange:function(){C._hashTags.setupEvent();var a=function(a){var b,c;b=a.newURL||location.href,b=b.split("#!")[1],C.currentHashTag!==b&&(c=C.stepHashTags.indexOf(b)+1,C.currentHashTag=b,C.goTo(c,void 0,void 0,!0))};addHashChange(a),C.manageEvent.list.hashchange.push({element:window,handler:a})},button:function(a,b,c){var d,e,f,g,i,j,k,l=a.length;for(f="nav"===b?function(a){d=h(a,"click",function(){c()})}:function(a,b,c){d=h(a,"click",function(a){a||(a=window.event);var b=a.target||a.srcElement;g=this,j=s(g,b),C.goTo(j)}),C._pagination.getLinks(a,b,c)},k=0;l>k;k++)e=a[k],i=e.getAttribute("rel"),i===C.container.id&&"true"!==e.getAttribute("data-seq-enabled")?(e.setAttribute("data-seq-enabled",!0),f(e,i,k)):null===i&&"true"!==e.getAttribute("data-seq-enabled")&&f(e,i,k),C.manageEvent.list.click.push({element:e,handler:d})},pauseOnHover:function(){var a,b,c=function(a,b){var c=a.getBoundingClientRect();return b.clientX>=c.left&&b.clientX<=c.right&&b.clientY>=c.top&&b.clientY<=c.bottom?!0:!1};a=h(C.container,"touchstart",function(){C.isTouched=!0}),C.manageEvent.list.touchstart.push({element:C.container,handler:a}),b=h(C.container,"mousemove",function(a){return a=a||window.event,C.isTouched===!0?void(C.isTouched=!1):void(c(C.container,a)===!0?(C.options.pauseOnHover===!0&&C.isPaused===!1&&C._autoPlay.pause(),C.isMouseOver=!0):(C.options.autoPlay===!0&&C.options.pauseOnHover===!0&&C.isMouseOver===!0&&C.isHardPaused===!1&&C._autoPlay.unpause(),C.isMouseOver=!1))}),C.manageEvent.list.mousemove.push({element:C.container,handler:b}),b=h(C.container,"mouseleave",function(){C.options.pauseOnHover===!0&&C.isHardPaused===!1&&C._autoPlay.unpause(),C.isMouseOver=!1}),C.manageEvent.list.mouseleave.push({element:C.container,handler:b})},swipeNavigation:function(){if(void 0!==window.addEventListener){var a=function(a){switch(a.type){case"dragleft":case"dragright":a.gesture.preventDefault();break;case"release":if(Math.abs(a.gesture.deltaX)>=C.hammerTime.options.dragMinDistance||Math.abs(a.gesture.deltaY)>=C.hammerTime.options.dragMinDistance)switch(a.gesture.direction){case"left":C.options.swipeEvents.left(C);break;case"right":C.options.swipeEvents.right(C);break;case"up":C.options.swipeEvents.up!==!1&&C.options.swipeEvents.up(C);break;case"down":C.options.swipeEvents.down!==!1&&C.options.swipeEvents.down(C)}}};C.hammerTime=new b(C.container,C.options.swipeHammerOptions).on("dragleft dragright release",a),C.manageEvent.list.hammer.push({element:C.container,handler:a})}},keyNavigation:function(){var a=h(document,"keydown",function(a){a||(a=window.event);var b=parseInt(String.fromCharCode(a.keyCode));switch(b>0&&b<=C.noOfSteps&&C.options.numericKeysGoToSteps&&C.goTo(b),a.keyCode){case 37:C.options.keyEvents.left(C);break;case 39:C.options.keyEvents.right(C)}});C.manageEvent.list.keydown.push({element:document,handler:a})},resizeThrottle:function(){function a(){var a,b,c;for(a=0;a<C.noOfSteps;a++)b=C.steps[a],c="step"+(a+1),C._getAnimationMap.getTransformProperties(c,b);C.transitionsSupported===!0&&C._canvas.move(C.currentStepId,!1),C.throttledResize(C)}var b,c;c=h(window,"resize",function(){clearTimeout(b),b=setTimeout(a,x)}),C.manageEvent.list.resize.push({element:window,handler:c})}}},C._init=function(a){var b,c,e,g,h;C.options=f(v,d),C.container=a,C.screen=j(C.container,"seq-screen")[0],C.canvas=j(C.container,"seq-canvas")[0],C.steps=t(C.canvas),m(C.container,"seq-active"),C.isHardPaused=!1,C.isPaused=C.options.autoPlay===!0?!1:!0,C.noOfSteps=C.steps.length,g=C._getAnimationMap.dataAttributes(),C._animation.propertySupport(g),C.animationMap=C._getAnimationMap.init(a,g),C._canvas.setup(),o(C),C.manageEvent.init(),C._autoPlay.init(),C._firstRun=!0,C.elementsAnimating=[],b=C.options.startingStepId,b=C._hashTags.init(b),1===C.options.autoPlayDirection?(e=b-1,C.prevStepId=1>e?C.noOfSteps:e):(e=b+1,C.prevStepId=e>C.noOfSteps?1:e),C.currentStepId=C.prevStepId,c="step"+C.prevStepId,C._animationFallback.setupCanvas(b),h=function(){C.options.autoPlay===!0&&C.unpaused(C),C._animation.domDelay(function(){C._animation.resetInheritedSpeed(c,"animate-out")}),C.goTo(b,C.options.autoPlayDirection,!0)},C.options.preloader!==!1&&void 0!==document.querySelectorAll?C._preload.init(function(){h(),C._animation.domDelay(function(){C.ready(C)
})}):(h(),C._animation.domDelay(function(){C.ready(C)}))},C.destroy=function(){var a,b,d,e,f,g;clearTimeout(C.autoPlayTimer),clearTimeout(C.phaseThresholdTimer),clearTimeout(C.stepEndedTimer),clearTimeout(C.phaseEndedTimer),a=C.manageEvent.list;for(b in a)a.hasOwnProperty(b)===!0&&(d=a[b],C.manageEvent.remove(b));for(n(C.currentPaginationLinks,"seq-current"),n(C.container,"seq-paused"),n(C.container,"seq-step"+C.currentStepId),n(C.container,"seq-active"),C.screen.removeAttribute("style"),C.canvas.removeAttribute("style"),e=0;e<C.noOfSteps;e++)f=C.steps[e],f.removeAttribute("style"),C._animation.resetInheritedSpeed("step"+(e+1),"animate-out"),n(f,"animate-in"),n(f,"animate-out");g=C.steps[C.options.startingStepId-1],C._animation.resetInheritedSpeed("step"+C.options.startingStepId,"animate-in"),m(g,"animate-in"),c.setAttribute("data-seq-enabled",!1),C.destroyed(C),C={}},C.next=function(){var a=C.currentStepId+1;a>C.noOfSteps&&C.options.cycle===!0&&(a=1),C.goTo(a)},C.prev=function(){var a=C.currentStepId-1;1>a&&C.options.cycle===!0&&(a=C.noOfSteps),C.goTo(a)},C.togglePause=function(){C.isPaused===!1?C.pause():C.unpause()},C.pause=function(){C.options.autoPlay=!1,C.isHardPaused=!0,C._autoPlay.pause()},C.unpause=function(){C.options.autoPlay=!0,C.isHardPaused=!1,C._autoPlay.unpause()},C.goTo=function(a,b,c,d){if(b=C._animation.getDirection(a,b),void 0===a||1>a||a>C.noOfSteps||a===C.currentStepId||C.options.navigationSkip===!1&&C.isActive===!0||C.options.navigationSkip===!0&&C.navigationSkipThresholdActive===!0&&void 0===d||C.isFallbackMode===!0&&C.isActive===!0&&void 0===d||C.options.preventReverseSkipping===!0&&C.direction!==b&&C.isActive===!0)return!1;var e=0;clearTimeout(C.autoPlayTimer),C.direction=b,void 0===c&&(e=C.options.phaseThreshold);var f="step"+C.currentStepId,g="step"+a,h=C.animationMap[f].element,i=C.animationMap[g].element;if(C._animation.manageNavigationSkip(a,b,f,g,i),C._animation.moveActiveStepToTop(h,i),C.isActive=!0,C._animation.changeStep(a),C.isFallbackMode===!1){C._canvas.move(a,!0),C._animation.resetInheritedSpeed(g,"animate-out");var j=C._animation.getStepDurations(a,g,f,b);1===b?C._animation.forward(a,g,i,f,h,j,d):C._animation.reverse(a,g,i,f,h,j,d)}else C._animationFallback.goTo(a,f,h,g,i,b,d)},C.paused=function(){},C.unpaused=function(){},C.animationStarted=function(){},C.animationFinished=function(){},C.currentPhaseStarted=function(){},C.currentPhaseEnded=function(){},C.nextPhaseStarted=function(){},C.nextPhaseEnded=function(){},C.throttledResize=function(){},C.preloaded=function(){},C.preloadProgress=function(){},C.ready=function(){},C.destroyed=function(){},C._utils={addClass:m,removeClass:n,addEvent:h,removeEvent:i},C._init(c),C}};return c}var sequence=defineSequence(imagesLoaded,Hammer);